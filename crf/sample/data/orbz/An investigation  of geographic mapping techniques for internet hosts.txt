
 An Investigation of Geographic Mapping Techniques for Internet Hosts * Venkata N. PadmanabhanMicrosoft 
Research ABSTRACT Inthispaper,weaskwhetheritispossibletobuildanIP addresstogeographiloationmappingservieforInternet 
hosts.Suhaserviewouldenablealargeandinteresting lassofloation­awareappliations.Thisisahallenging problembeauseanIPaddressdoesnotinherentlyontain 
anindiationofloation. Wepresentandevaluatethreedistinttehniques,olle­tivelyreferredtoasIP2Geo,fordeterminingthegeographi 
loationofInternethosts.Thefrsttehnique,GeoTrak,in­fersloationbasedontheDNSnamesofthetargethostor othernearbynetworknodes.Theseondtehnique,GeoP­ing,usesnetworkdelaymeasurementsfromgeographially 
distributedloationstodeduetheoordinatesofthetar­gethost.Thethirdtehnique,GeoCluster,ombinespartial (andpossiblyinaurate)host­to­loationmappinginforma­tionandBGPprefxinformationtoinfertheloationofthe 
targethost.Usingextensiveandvarieddatasets,weevalu­atetheperformaneofthesetehniquesandidentifyfunda­mentalhallengesindeduinggeographiloationfromthe 
IPaddressofanInternethost. 1. INTRODUCTION Inthispaper,weaskthequestion:isitpossibletobuild anIPaddresstogeographiloationmappingserviefor 
Internethosts?GivenanIPaddress,themappingservie wouldreturnthegeographiloationofthehosttowhih theIPaddresshasbeenassigned.Thisisahallenging 
problembeauseanIPaddressdoesnotinherentlyontain anindiationofgeographiloation. BuildinganIPaddresstoloationmappingservie(the 
loationmappingproblemforshort)isaninterestingprob­leminitsownright.Suhaserviewouldalsoenablea largeandinterestinglassofloation­awareappliationsfor 
*http://www.researh.mirosoft.om/.padmanab/ thttp://www.s.berkeley.edu/.lakme/.Theauthorwasan internatMirosoftResearhthroughmuhofthiswork. 
Permission to make digital or hard copies of all or part of this work for personal or classroom use is 
granted without fee provided that copies are not made or distributed for pro.t or commercial advantage 
and that copies bear this notice and the full citation on the .rst page. To copy otherwise, to republish, 
to post on servers or to redistribute to lists, requires prior speci.c permission and/or a fee. SIGCOMM 
01, August 27-31, 2001, San Diego, California, USA.. Copyright 2001 ACM 1-58113-411-8/01/0008 ...$5.00. 
t Lakshminarayanan SubramanianUniversity of California at Berkeley Internethosts,justassystemssuhasGPS[6]havefor 
mobiledevies.Byknowingtheloationofalienthost, anappliation,suhasaWebservie,ouldsendtheuser loation­basedtargetedinformationonloalevents,regional 
weather,et.(targetedadvertising),lassifyusersbasedon loation(e.g.,ount"hits"basedontheregiontheuserislo­atedin),orontroltheavailabilityofdatabasedonuserlo­ation(territorialrightsmanagementakintoTVbroadast 
rights).Eahappliationmayhaveadiferentrequirement ontheresolutionofloationinformationneeded. Inthispaper,wepresentseveralnoveltehniques,ol­letivelyreferredtoasIP2Geo,thatapproahtheloation 
mappingproblemfromdiferentangles.Thesetehniques exploitvariouspropertiesofandobservationsontheInter­netsuhashierarhialaddressingandorrelationbetween 
delayanddistane.Wehaveanalyzedavarietyofdatasets bothtorefnethesetehniquesandevaluatetheirperfor­mane.Tothebestofourknowledge,oursisthefrstre­searhefortintheopenliteraturethatstudiesthisproblem 
indetail. Thefrsttehnique,GeoTrak,triestoinferloationbased ontheDNSnamesofthetargethostorothernearbynet­worknodes.TheDNSnameofanInternethostsometimes 
ontainsluesaboutthehost'sloation.Suhalue,when present,ouldindiateloationatdiferentlevelsofgranu­laritysuhasity(e.g.,orerouterl.SanFraniso.w.netin­diatestheityofSanFraniso),state(e.g.,www.state.a.us 
indiatesthestateofCalifornia),orountry(e.g.,www.un.m indiatestheountryofCameroon). Theseondtehnique,GeoPing,usesnetworkdelaymea­surementsmadefromgeographiallydistributedloations 
toinfertheoordinatesofthetargethost.Itisbasedon thepremisethatthedelayexperienedbypaketstravel­ingbetweenapairofhostsinthenetworkis,tofrstorder, 
afuntionofthegeographiseparationbetweenthehosts (akintotherelationshipbetweensignalstrengthanddis­taneexploitedbywirelessuserpositioningsystemssuhas 
RADAR[l]).Thisis,ofourse,onlyanapproximation.So ourdelay­basedtehniquereliesheavilyonempirialmea­surementsofnetworkdelay,asdisussedinSetion5. 
Thethirdtehnique,GeoCluster,ombinespartial(and possiblyinaurate)IP­to­loationmappinginformationwith BGPprefxinformationtoinfertheloationofthehostof 
interest.Forourresearh,weobtainedthehost­to­loation mappinginformationfromavarietyofsoures,inludinga 
popularWeb­basedemailsite,abusinessWebhostingsite, andanonlineTVguidesite.Thedatathusobtainedis partialinthesensethatitonlyinludesarelativelysmall 
numberofIPaddresses.WeuseBGPprefxinformationto expandtheoverageofthisdatabyidentifyinglustersof IPaddressesthatarelikelytobeloatedinthesamege­ographiarea.Thistehniqueisself­alibratinginthatit 
anoferanindiationofhowaurateaspeifloation estimateislikelytobe. Wehaveevaluatedthesetehniquesusingextensiveand 
varieddatasets.Whilenoneofthetehniquesisperfet, theirperformaneisenouraging.Themedianerrorinour loationestimatevariesfrom28kmtoseveralhundredkilo­metersdependingonthetehniqueusedandthenatureof 
thehostsbeingloated(e.g.,well­onnetedlientsversus proxylients).Webelievethatasignifantontribution ofourworkisasystematistudyofabroadspetrumof 
tehniquesandadisussionofthefundamentalhallenges indeterminingloationbasedjustontheIPaddressofa host. 
Therestofthispaperisorganizedasfollows.InSetion 2wesurveyrelatedwork.InSetion3wedesribeour designrationaleandexperimentalmethodology.Wepresent 
thedetailsofthethreeIP2Geotehniquesandananalysis oftheirperformaneinSetions4,5,and6.Finally,we presentasummaryanddisusstheontributionsofourwork 
inSetion7.  2. RELATED WORK Therehasbeenbeenmuhworkontheproblemofloat­inghostsinwirelessenvironments.Themostwell­known 
amongtheseistheGlobalPositioningSystem(GPS)[6]. However,GPSisinefetiveindoors.Therehavebeensev­eralsystemstargetedspeifallyatindoorenvironments, 
inludingAtiveBadge[9],Bat[l0],andRADAR[l].As wedisusslater,ourGeoPingtehniqueusesavariantofone ofthealgorithmswehaddevelopedforRADAR.However, 
ingeneralthesetehniquesarespeiftowirelessnetworks anddonotreadilyextendtotheInternet. IntheInternetontext,anapproahthathasbeenused 
todetermineloationistoseektheuser'sinput(e.g.,byre­quiringtheusertoregisterwithand/orlogintothesite,by 
storingtheuser'sredentialsinlient­basedookies,et.). However,suhapproahesarelikelytobe(a)burdensome ontheuser,(b)inefetiveiftheuserusesalientother 
thattheonewheretheookieisstored,and()pronetoer­rorsdueto(possiblydeliberate)inauraiesintheloation informationprovidedbyanindividualuser.(InSetion6, 
wedisusshowGeoClusterdealswithsuhinauraiesby aggregatinginformationderivedfromindividualusers.) Analternativeapproahistobuildaserviethatmaps 
anIPaddresstotheorrespondinggeographiloation[l6]. Thereareseveralwaysofdoingthis: l.Inorporatingloationinformation(e.g.,latitudeand 
longitude)inDomainNameSystem(DNS)reords. 2.UsingtheWhois[8]databasetodeterminetheloa­tionoftheorganizationtowhihanIPaddresswas 
assigned. 3.Usingthetraeroute[ll]toolandmappingtherouter namesinthepathtogeographiloations. 4.DoinganexhaustivetabulationIPaddressrangesand 
theirorrespondingloations. TheDNS­basedapproahwasproposedinRFCl876[l7]. ThisworkdefnestheformatofanewResoureReord 
(RR)fortheDNS,andreservesaorrespondingDNStype mnemoni(LOC)andnumerialode(29).TheDNS­based approahfaesdeploymenthurdlessineitrequiresamod­ifationofthereordstrutureoftheDNSreords.This 
alsoburdensadministratorswiththetaskofenteringthe LOCreords.Moreover,thereisnoeasywayofverifying theaurayoftheloationentered. 
AnapproahusedwidelyinmanytoolsistoqueryWhois servers[8].ToolssuhasIP2LL[26]andNetGeo[l4]use theloationinformationreordedintheWhoisdatabaseto 
inferthegeographiloationofahost. ThereareseveralproblemswithWhois­basedapproahes. First,theinformationreordedintheWhoisdatabasemay 
beinaurateorstale.Also,theremaybeinonsistenies betweenmultipleserversthatontainreordsorresponding toanIPaddressblok.Seond,alarge(andgeographially 
dispersed)blokofIPaddressesmaybealloatedtoasingle entityandtheWhoisdatabasemayontainjustasingle entryfortheentireblok.Forexample,the4.0.0.0/8IP 
addressblokisalloatedtoBBNPlanet(nowknownas Genuity)andaquerytoARINWhoisdatabasereturnsthe loationasCambridge,MAforanyIPaddresswithinthis 
range. Analternativeapproahisbasedonthetraeroutetool. Thebasiideahereistoperformatraeroutefromasoure 
tothetargetIPaddressandinferloationinformationfrom theDNSnamesofroutersalongthepath.Aroutername maynotalwaysontainloationinformation.Evenwhen 
itdoes,itisoftenhallengingtoidentifytheloationinfor­mationsinethereisnostandardnamingonventionthat isusedbyallISPs.Wedisusstheseissuesinmoredetail 
whenwepresentGeoTrakinSetion4.Examplesofloa­tionmappingtoolsbasedontraerouteinludeVisualRoute [3l],Neotrae[29],andGTrae[l5]. 
Finally,thereareloationmappingservies,suhasEdge­SapefromAkamai[l8]andTraeWarefromDigitalIsland [22].Giventheextensiverelationshipthattheselargeon­tentdistributionnetworksenjoywithseveralISPs,itison­eivablethattheseloationmappingserviesarebasedon 
anexhaustivetabulationofIPaddressrangesandtheor­respondingloation.However,thealgorithmsemployedby EdgeSapeandTraeWareareproprietary,soitisdiÆult 
forustoomparethemtoourresearhefort. 2.1 Fundamental Limitation due to Proxies ManyWeblientsarebehindproxiesorfrewalls.Sothe 
"lient"IPaddressseenbytheexternalnetworkmayatu­allyorrespondtoaproxy,whihmaybeproblematifor loationmapping.Insomeasesthelientandtheproxy 
maybeinloseproximity(e.g.,aahingproxyonauniver­sityampus).However,inotherasestheymaybefarapart. AnexampleofthelatteristheAOLnetwork[l9],whihhas 
aentralizedlusterofproxiesatoneloation(Virginia)for servinglienthostsloatedallarosstheU.S.Figurelshows 
theumulativedistributionfuntion(CDF)ofthedistane betweentheAOLproxiesandlients.(Thelikelyloationof lientswasinferredfromthedatasetsdesribedinSetion 
3.5.)Weobservethatasignifantfrationofthelientsare loatedseveralhundredtoafewthousandkilometersfrom theproxies. 
Proxiesimposeafundamentallimitationonallloation Figure1:DistributionofdistanebetweenAOL proxiesandlients. 
mappingtehniquesthatdependonlientIPaddress.This inludestehniquesbasedonWhois,traeroute(e.g.,Geo­Trak),andnetworkdelaymeasurements(e.g.,GeoPing). 
Notonlyaretheseshemesunabletodeterminethetrue loationofalient,theyarealsooblivioustotheerror(i.e., theseshemeswouldinorretlyreturntheloationofthe 
proxywithoutrealizingtheerror).OurGeoClusterteh­niqueisanexeptioninthatitisoftenabletoautomatially tellwhenitsloationestimateislikelytobeerroneous.So 
ratherthaninorretlydeduingtheloationofthelient basedontheIPaddressoftheproxy,GeoClusterwouldre­frainfrommakingaloationestimateatall.Wedisussthis 
issueismoredetailinSetion6.3.  Seattle, WA Madison, WI Austin, TX Durham, NC Berkeley, CA Urbana, 
IL Boston, MA Chapel Hill, NC Stanford, CA St. Louis, MO New Brunswick, NJ San Diego, CA Dallas, TX Baltimore, 
MD Figure2:OutlinemapoftheU.S.showingloations ofourprobemahines.  3. DESIGN RATIONALE AND EXPERIMEN-TAL 
METHODOLOGY Inthissetion,wefrstdisussthedesignrationalefor IP2Geoinviewofthelimitationsofexistingtehniquesdis­ussedabove.Wethendesribetheexperimentalsetupand 
datasetsusedinourstudy. 3.1 Design Rationale InSetion2,wedisussedseveralexistingapproahes toloationmappingandtheirlimitations.Amongthese, 
Whoisandtraeroutebasedapproahesarethemostpop­ular.Togetabetterunderstandingofthestrengthsand limitationsofthesetwoapproahes,wehavedevelopedGeo­Trak,atraeroute­basedtoolforperformingloationmap­pingthatislargelybasedonthesamepriniplesasexist­ingtraeroute­basedtoolssuhasVisualRouteandGTrae. 
WeomparetheperformaneofGeoTrakwithNetGeo,a Whois­basedloationmappingtool. IP2Geoalsoinludestwonewtehniques,GeoPingand 
GeoCluster,whihoperateverydiferentlyfromexistingap­proahes.GeoPingexploitstheorrelationbetweennetwork 
delayandgeographidistanetodeterminetheloationof ahost.Althoughthisorrelationisnotstrongenoughtobe apturedinamathematialmodel,weshowthatisindeed 
possibletobebuildaoarse­grainedloationtrakerusing justdelaymeasurements. WealsodesribeGeoCluster,apowerfulnewtehnique 
thatombinespartialIP­to­loationmappinginformation obtainedfromavarietyofsouresandtopologiallustering 
data[l2]todoloationmapping.Ourresultsindiatethat GeoClusterperformsthebestamongtheIP2Geotehniques. Beforegettingtothedetailsofthesetehniques,wede­sribetheexperimentalsetupanddatasetsthatwehave 
usedinourstudy. 3.2 Geographic Setting AllofourexperimentsaresetintheUnitedStates(U.S.). Themainreasonforthisrestritionisthat,asofthetimeof 
thiswriting,thebulkofthedatasetsandprobemahines thatwehavepertaintoorareloatedintheU.S.While theremaybelimitationstostudyingasingleountry,the 
U.S.stillofersalargeandvariedtestbedforourresearh. TheU.S.onsistsof50states,48ofwhihareloatedinthe largegeographiareadepitedinFigure2,andtwoothers 
thatareloated2000kmtothenorthwestand4000kmto thesouthwest,respetively,ofthislandmass.(Inaddition, ourdatasetsreordedtheU.S.apital,WashingtonDC,as 
aseparateentity,soweefetivelyhad5l"states".)Thus, theU.S.isaslargeasertainontinentsintermsofgeo­graphiexpanse.Itisalsohometoasizeablefrationof 
theInternet,intermsofnetworks,routers,endhosts,and users.Sowebelievetheresearhreportedinthispaperis interestingdespitebeinglimitedtotheU.S. 
 3.3 Probe Machines Weobtainedaesstoprobemahinesatthel4loations depitedinFigure2.Thesemahinesweredistributedgeo­graphiallyarosstheU.S.Allofthemwerewell­onneted 
hostsonuniversityampusesexeptforthemahineatSeat­tle,WA,whihwasloatedataorporatesite(Mirosoft). Theseprobemahineswereusedtomakedelaymeasure­mentsforGeoPingandtoinitiatetraeroutesforGeoTrak. 
AsweexplainlaterinSetion5.1.1,GeoPingisprimed usingadatabaseofdelaymeasurementsfromtheprobema­hinestoseveral"target"mahinesatknownloations.To 
obtainsuhadatabase,weonstrutedalistof265Web servers(termedUnivHosts)spreadarossuniversityam­pusesin44statesoftheU.S.Theseletionofuniversity 
serversastargethostsoferedtheadvantagethatwewere quiteertainoftheiratualgeographiloation. TheUnivHostsdatasetisalsousedtoevaluatetheper­formaneofGeoTrakandGeoCluster. 
 3.4 BGP Data BGProutinginformationwasderivedfromdumpstaken attworoutersatBBNPlanet[20]andMERIT[28].Sine 
GeoClusteronlyrequirestheaddressprefx(AP)informa­tion,weonstrutedasupersetontainingaddressprefx informationderivedfrombothsoures.Inalltherewere 
l00,666APsinourlist. 3.5 Partial Location Mapping Information WeobtainedpartialIP­to­loationmappinginformation 
fromthreesoures.Thedatasetsweobtainedwerepartial inthesensethattheyonlyoveredasmallfrationofIP addressspaeinuse.Notethatinnoasedidwehaveaess 
touserIDsorotheruser­speifinformation.Ourdatasets onlyontainedIPaddressandloationinformation.Soour workdidnotompromiseuserprivayinanyway. 
l.Hotmail:Hotmail[24]isapopularWeb­basedemail serviewithseveralmillionativeusers.Oftheover lmillion(anonymous)usersweobtainedinformation 
for,wefousedonthe4l772luserswhohadregis­teredtheirloationasbeingintheU.S.Theloation informationweobtainedfromtheusers'registration 
reordswasatthegranularityofU.S.states.Inad­dition,weobtainedalogofthelientIPaddresses orrespondingtothel0mostreentuserlogins(pri­marilyinthefrsthalfof2000).Weombinedthe 
loginandregistrationinformationtoobtainapartial IP­to­loationmapping. 2.bCentral:bCentral[2l]isabusinessWebhostingsite. 
Loationinformationatthegranularityofzipodes wasderivedfromHTTPookies.Inallweobtained loationinformationorrespondingtol8l246unique 
IPaddressesseenduring(partof)adayinOtober 2000. 3.FooTV:FooTVisanonlineTVprogramguidewhere peoplelookupprogramlistingsforspeifzipodes. 
(Wedonotrevealthenameofthesiteheredueto anonymityrequirements.)Fromtraesgatheredovera two­dayperiodinFebruary2000,weobtainedalistof 
l42807uniquelientIPaddressesand336l8l(IP,zip) pairsorrespondingtothelientIPaddressandthezip odethattheuserspeifedinhis/herquery.Asubset 
oftheIPaddresseshadmorethanoneorresponding zipode,whihwereusuallylusteredtogethergeo­graphially. IntheaseofbCentralandFooTV,wemappedthezip 
odeinformationtotheorresponding(approximate)lati­tudeandlongitudeusinginformationfromtheU.S.Census Bureau[30].IntheaseofHotmail,weomputedthezip­enterofeahstatebyaveragingtheoordinatesofthezip 
odesontainedwithinthatstate. ThepartialIP­to­loationmappingobtainedfromthese souresmayontaininauraies.Forinstane,inthease 
ofHotmailandbCentralusersmayhaveregisteredinorret loationinformationormayonnetfromloationsother thantheonetheyregistered.IntheaseofFooTV,users 
mayenquireaboutTVprogramsinareasfarremovedfrom theirurrentloation,althoughwebelievethisisunlikely. Regardless,weexplaininSetion6howGeoClusterisrobust 
tosuhinauraiesinloationinformation.  4. THE GEOTRACK TECHNIQUE TheGeoTraktehniquetriestoinferloationbasedon 
theDNSnamesofthehostofinterestorothernearbynet­worknodes.Networkoperatorsoftenassigngeographially l meaningfulnamestorouters,presumablyforadministra­tiveonveniene.Forexample,thenameorerouterl.SanFran­iso.w.netorrespondstoarouterloatedinSanFran­iso.Westressthathavinggeographiallymeaningfulrouter 
namesisnotarequirementorafundamentalpropertyofthe Internet.Ratheritsimplyanobservationthatisgenerally 
supportedbyempirialdata. Wedefnearoutertobereognizableifitsgeographilo­ationanbeinferredfromitsDNSname.Routerswhose 
IPaddressannotbemappedtoaDNSnameorwhoseDNS namedoesnotontainmeaningfulloationinformationare onsideredasnotbeingreognizable. 
GeoTrakusesthesegeographihintstoestimatethelo­ationofthetargethost.First,itdeterminesthenetwork pathbetweenaprobemahineandthetargethostusing 
thetraeroutetool.TraeroutereportstheDNSnamesof theintermediaterouterswherepossible.ThenGeoTrakex­tratsloationinformationfromtheDNSnamesofreogniz­ableroutersalongthepath.Thus,ittraesthegeographi 
pathtothetargethost.Finally,GeoTrakestimatesthe loationofthetargethostasthatofthelastreognizable routerinthepath(i.e.,theonelosesttothetarget). 
AsnotedinSetion2,traeroute­basedapproahesthat extratgeographihintsfromrouternameshavebeenpro­posedbefore(e.g.,GTrae[l5],VisualRoute[3l]).How­ever,wearenotawareofworkintheopenliteratureon 
aquantitativeevaluationofthetraeroute­basedapproah todeterminingthegeographiloationofhosts.Ourgoal ispreiselytodosuhanevaluation.Duetothelogisti 
diÆultiesassoiatedwithobtainingandrunningexisting traeroute­basedtools,wedeidedtowriteourowntool basedonGeoTraktodolarge­saleexperimentation.We 
havetestedourtooloveralargesampleofIPaddressesand foundthatitsoverageisomparabletoVisualRoutewithin theU.S.andinEurope. 
4.1 Extracting Geographic Information from Router Names GeographiinformationistypiallyembeddedintheDNS 
nameofarouterintheformofaode,whihisusually anabbreviationforaity,state,orountryname.There isnostandardnamingonventionfortheseodes.Eah 
ISPtendstouseitsownnamingonvention.Thismakes thetaskofextratingloationinformationfromDNSnames hallenging. 
Basedonempirialdata,wehaveobservedthatthereare basiallythreetypesofodesthatindiateloation:ity odes,airportodes,andountryodes.SomeISPsassign 
DNSnamestoroutersbasedontheairportodeoftheity theyareloatedin.Sineairportodesareaworldwide standard,suhanamingonventiongreatlyeasesthetask 
l Tobepreise,DNSnamesareassoiatedwithrouterin­terfaes,notroutersthemselves.However,foreaseofexpo­sitionweonlyusetheterm"router". 
ofdeterminingtherouter'sloation.Forexamplesj2­w­o3.sj.above.netreferstoarouterinSanJose,CA(airport odesj).However,manyISPsusenon­standardodesfor 
ities.WehavenotiedthattheityofChiago,ILhas atleastl2diferentodesassoiatedwithit(e.g.,hg, hgil,gil,hi,hiago).Wehavealsoobservedthatmany 
routersoutsidetheUnitedStateshavetheountryodes embeddedintheirnames.Forexample,therouterwith thenameasd­nrl6.nl.kpnqwest.netisloatedintheNether­lands(ountryodenl).Theountryinformationanbe 
veryusefulin(partially)validatingtheorretnessofthe loationguessedbasedonityorairportodes. Weexaminedseveralthousanddistintrouternamesen­ounteredinthelargesetoftraeroutesthatweperformed 
fromourl4probeloations.Weompiledalistofapproxi­mately2000airportandityodesforitiesintheU.S.and inEurope.Oftheentiresetofairportodes[27],ourlist 
onlyinludesarelativelysmallfrationofodesthatare atuallyusedinrouternames.SineGeoTrakdedueslo­ationbydoingastringmathofrouternamesagainstthe 
odes,onstrutingalistwithasfewsuperfuousodesas possibledereasesthehanesofaninadvertentmath. Tofurtherreduethehanesofaninadvertentmath, 
wedividedthelistofloationodesintoseparatepiees orrespondingtoeahmajorISP(e.g.,AT&#38;T,Sprint,et.). Whentryingtoinferloationfromarouternameassoiated 
withapartiularISP,GeoTrakonlyonsiderstheodesin theorrespondingsubset. Thereisthequestionofhowrouternamesaremathed 
againsttheloationodes.Simplytryingtodoastring mathwithoutregardtopositionofthemathingsubstring maybeinappropriate.Forexample,theodeharlotte, 
whihorrespondstoCharlotte,NCintheeasternU.S., wouldinorretlymathagainstthenameharlotte.usd.edu, whihorrespondstoahostinSanDiego,CAinthewestern 
U.S.Throughempirialobservation,wehavedefnedISP­speifparsingrulesthatspeifythepositionatwhihthe loationode,ifany,mustappearinrouternamesassoiated 
withapartiularISP.Wesplittherouternameintomulti­plepieesseparatedbydots.TheISP­speifparsingrules speifywhihpiee(s)shouldbeonsideredwhenlookingfor 
amath.Forexample,theruleforSprintlinkspeifesthat theloationode,ifpresent,willonlybeinthefrstpiee fromtheleft(e.g.,sl­bbl0­sea­9­0.sprintlink.netontaining 
theodeseaforSeattle).TheruleforAlterNet(UUNET) speifesthattheode,ifpresent,willonlyappearinthe thirdpieefromtheright(e.g.,l92.atm4­0.srl.atl5.alter.net 
ontainingtheodeatlforAtlanta). 4.2 Performance Evaluation WeomparetheperformaneofGeoTrakandaWhois­basedtool,NetGeo[l4],bothforuniversityhostsdrawn 
fromtheUnivHostsdatasetandforamorediversesetof hostsdrawnfromtheFooTVdataset.Thelatteronsists ofarandomsampleof2380lientIPaddressesdrawnfrom 
theFooTVdataset.WhilemanyoftheFooTVlientson­netedviaproxies,noneoftheuniversityhostswasbehind aproxy.Forthisexperiment,weusedtheprobemahineat 
UNCinRaleigh,NCasthesoureofalltraeroutes. Wequantifytheaurayofaloationestimateusingthe errordistane,whihwedefneasthegeographidistane 
betweentheatualloationofthedestinationhostandthe estimatedloation.IntheaseofFooTV,the"atual"lo­ ationorrespondstothezipodereordedintheFooTV 
datasetwhih,asnotedinSetion3.5,maynotbeentirely aurate.Also,anIPaddressmaybeassoiatedwithmul­tipleloations,eitherbeauseitwasalloateddynamially 
(sayusingDHCP[5])orbeauseitbelongedtoaproxy host(suhasaWebproxyorafrewall).GeoTrak,onthe otherhand,wouldonlymakeasingleloationestimatefor 
apartiularIPaddress.Inourevaluation,weomputesep­arateerrordistanesorrespondingtothemany"atual" loationsassoiatedwithanIPaddress. 
 Figure3:CDFoftheerrordistaneforGeoTrak andNetGeo. Figure3showstheCDFoferrordistaneforbothGeo­TrakandNetGeo.Itisveryinterestingtonotethesimilar­itybetweenthe"NetGeo­FooTV"and"GeoTrak­FooTV" 
urvesbeyondthe70thperentilemark,andthedistribu­tionofdistaneofAOLlientsfromtheirproxiesinFigure l.GeoTrakdeterminestheloationoftheAOLproxies 
asWashington,DCwhileNetGeoreturnstheloationas Sterling,VA.Thesimilarityintheurvesanbeattributed tothefatthatthesetwoloationsareonlyabout35km 
apart.(Moreover,AOL'sproxiesarealsoloatedinthe sameviinity.) WealsoobservethattheperformaneofGeoTrakisonly 
slightlybetterthanthatofNetGeo.GeoTrakexhibitsa medianerrordistaneof590kmandNetGeoamedianof 650km.SinemanyoftheFooTVlientsarebehindproxies, 
neitherGeotraknorNetGeoisabletoestimatethelient's loationaurately. Itisinterestingtonotethatthereisasignifantdifer­eneintheperformaneofGeoTrakforthewell­onneted 
UnivHostshostsasomparedtothatforFooTVlients.For instane,themedianerrordistaneisl02kmfortheformer whileisis590kmforthelatter.Thereasonforthisdifer­eneisthat(a)noneofthehostsinUnivHostsisbehinda 
proxy,and(b)thesehostsarewellonnetedinthesense thatatraeroutetothemgenerallyompletesandyieldsa lastreognizablerouterthattendstobelosetothetarget 
host.  5. THE GEOPING TECHNIQUE TheGeoPingtehniqueseekstodeterminethegeographi loationofanInternethostbyexploitingtherelationship 
betweennetworkdelayandgeographidistane.GeoPing measuresthedelaytothetargethostfrommultiplesoures (e.g.,probemahines)atknownloationsandombines 
thesedelaymeasurementstoestimatetheoordinatesofthe targethost. 5.1 Correlation between Network Delay 
and Geographic Distance Conventionalwisdominthenetworkingommunityhas suggestedthatthereispoororrelationbetweennetwork 
delayandgeographidistane[2].Thishaslargelybeen attributedtothepreseneofiruitousgeographipaths intheInternetandbottlenekslinksthatauseongestion 
(andhenedelay).However,inreentyears,theInternet hasgrownataveryrapidpae,intermsofbandwidthas wellasoverage(witnesstherapidgrowthinthenumber 
andapaityofhigh­speedlinks,ISPpointsofpresene, et.).Theriheronnetivity(atleastinwell­onneted portionsoftheInternetsuhasintheU.S.)oftenimplies 
lessiruitousroutes. Toquantifyimpatofriheronnetivity,wetraedthe networkpathsfromseveralknownloationstohostsinthe 
UnivHostsdataset.Foreahpairofhosts,wedefnedthe linearizeddistaneasthesumofthelengthsoftheindi­vidualhopsalongthepathbetweenthehosts.(Weused 
GeoTraktodeterminethegeographiloationofthein­termediatenodes.Weskippedovernodeswhoseloations ouldnotbedetermined,soingeneralwemightunderesti­matethelinearizeddistane.)Weomputetheratioofthe 
linearizeddistanetothegeographidistanebetweenthe hosts.Thelosertheratioistol,themore"diret"(i.e., lessiruitous)thenetworkpathis.Figure4showstheu­mulativedistributionofthisratioforpathsoriginatingfrom 
3diferentloations.Themainobservationwemakehereis thattheratiooflinearizeddistanetogeographidistane islosetolinthevastmajorityofases.Thisimpliesthat 
thenetworkarenotiruitous. Figure4:CDFoftheratiooflinearizeddistaneto geographidistaneforInternetpathsoriginating 
fromthreeloations. Congestioninthenetworkmayleadtosignifantqueuing delays,whihwouldalsodisrupttherelationshipbetween 
networkdelayandgeographidistane.Toalleviatethis problem,wegatherseveralsamplesforthedelaybetween twohostsandthenpiktheminimumamongthem.(This 
approahhasbeenusedinseveralnetworkingprotoolsbe­fore,e.g.,TCPVegas[3].)Whilenotperfet,pikingthe minimumenablesustoeliminatemuhoftheefetofon­gestion.Ourexperimentssuggestthattheminimumdelay 
stabilizesonewehaveatleastl0­l5delaysamples. Theaboveapproahwouldfailinthepreseneofspeial links(e.g.,dialup,satellite,et.)thathaveaninherentlarge 
delaythatdoesnotneessarilyorrelatewithgeographi distane.Wedisusspossibleapproahestosolvingthis probleminSetion5.3. 
Inthefollowingsub­setions,wepresentdelaymeasure­mentsthatsupportourontentionthatthereissignifant orrelationbetween(theminimum)networkdelayandgeo­graphidistane.Althoughtheorrelationisnotperfet,we 
arestillabletoexploitittodetermineloationataoarse granularity.WepresentarobustalgorithmforthisinSe­tion5.2.Wepresentexperimentalresultsthatquantifythe 
aurayofthisalgorithmandalsoindiatethefundamental limitationsofadelay­basedapproah. 5.1.1 Experimental 
Setting WeusetheUnivHostsdatasetforperformingourmea­surements.Weperformtraeroutesandpingmeasurements 
froml4diferentsoures(Figure2)toallthe265univer­sityserversinUnivHosts.Afteridentifyingthepathfrom agivensouretoahost,wedeterminetheround­tripdelay 
toallintermediateroutersusingpingmeasurements.From multipledelaysamples,weomputetheminimumRTTto thedestinationandtoeahintermediaterouterinthepath. 
WeuseGeoTraktodeterminethephysialloationofin­termediaterouters.Usingthedatagatheredforeahsoure, weonstrutalargedatasetof[minimumdelay,geographi 
distane]pairsorrespondingtothepathsfromthatsoure tothehostsinUnivHosts(andtheintermediaterouters). 5.1.2 
CDF of Distance given Network Delay Weinvestigatewhetherthereisamodelthatwoulden­ableestimationofgeographidistanebasedonknowledge 
ofnetworkdelay.Forthispurpose,wedividethedelay rangeintoseverall0mswidebinsandomputetheCDFof geographidistanewithineahbin.(Wedeidedtohave 
aseparatebinforthe0­5msdelayrangebeauseweob­servedempiriallythat5msoftendefnesthethresholdfor a"metropolitanarea".Forinstane,wefoundthatmore 
than90%ofthenodeswithinanRTTof5msareloated withinarangeof50kmfromthesoure.)Sothedelaybins weusedtolassifyourmeasurementswere:0­5ms,5­l5ms, 
l5­25ms,,l25­l35ms. Figure5showstheCDFofgeographidistaneforour sourehostloatedinSeattle.Manyofthedelaybinsex­hibitdistint"lifs"(i.e.,sharpupswings)intheumulative 
probabilitydistributionforspeifdistanevalues.Forex­ample,thelifaroundl300kmforthe25­35msdelaybin ismainlyontributedbyloationsintheSanFranisoBay 
Area.Theothernotieabletrendisthatasthedelayin­reasesfrom0to80ms,thelifintheCDFshiftstothe right.Weobservedsimilartrendsfortheprobesatother 
loationsaswell. WhilethereisadefnitetrendinthelifsoftheCDF foreahdelayrange,ourresultssuggestthattherelation­shipbetweendelayanddistaneisnotstrongenoughtobe 
apturedinapreisemathematialmodel.Forsmallde­layvalues(underl0ms),wefoundthatmostofthehosts (over90%)arewithinaradiusof300kmfromthesoure. 
Howeverfordelayvaluesmorethan40ms,weobservedan Figure5:CumulativeDistributionofgeographi distaneformultipledelayrangesbasedondata 
gatheredattheSeattle,WAprobeloation. errorofatleast300­400kmtoobtaina70%onfdenein thedistaneestimate.Wevalidatedthisforthedatasets 
obtainedfromeahofthel4probeloations. Wealsoinvestigatedhowtherelationshipbetweendelay anddistanevarieswhenweonsiderhostsbelongingtodis­tintorganizationsloatedinthesamegeographiarea.For 
thispurpose,weonsideredprobesloatedatDukeUniver­sityandtheUniversityofNorthCarolina(UNC)loated inthesamemetropolitanareaontheU.S.eastoast,and 
similarlyBerkeleyandStanfordonthewestoast.Weom­paredtheCDFsorrespondingtovariousdelayrangesfor eahoftheseprobeloations.ThelifsoftheCDFsfor 
DukeandUNCmathedeahother,andlikewiseforBerke­leyandStanford.ThissuggeststhatthelifsoftheCDFs arelargelyafuntionofthegeographiloationofaprobe 
ratherthanthespeifprobeitself. Onelimitationofourmeasurementsisthatmostofour probemahineswereloatedatuniversitysites,manyof 
whihwereonnetedtothehigh­speedInternet2bakbone [25].Thedelay­distanerelationshipfornearbyloations mightnotmathquiteaswelliftheprobeswereloated 
atmoreheterogeneoussiteswithdiferingISPonnetivity. However,aswedisussnext,ourmethodologyfordetermin­ingloationisrobusttosuhdiferenessinewedonot 
attempttomapdiretlyfromdelaymeasurementstodis­taneestimates.  5.2 Nearest Neighbor in Delay Space (NNDS) 
WenowdisusshowGeoPingexploitstherelationshipbe­tweendelayanddistanetodeterminethegeographiloa­tionofahost.Sineweareunabletoonstrutapreiseand 
ompatmathematialmodelthatapturestherelationship, weuseanempirialapproah,whihwetermnearestneigh­borindelayspae(NNDS).NNDSispatternedafterthe 
nearestneighborinsignalspae(NNSS)algorithmwehad developedintheRADAR[l],asystemtoloatehostsin wirelessLANs. 
NNDSismotivatedbytheobservationthathostswith similarnetworkdelayswithrespettootherfxedhoststend tobeloatedneareahother.Sothefrststepistoon­strutadelaymapthatreordstherelationshipbetween 
delayandloation.Eahentryofthedelaymapontains: (a)theoordinatesofahostataknownloation,and(b)a delayvetor,=(dl 
dN),ontainingthemeasured (minimum)delaytothehostfromNprobesatknownlo­ations.Thedelaymaponstitutesthetrainingdataandis 
onstrutedofine.Givenanewtargethost,T,whoseloa­tionistobedetermined,wefrstmeasurethenetworkdelay toitfromtheNprobes.Wethenonstrutadelayvetor 
'd'' forTas=(dN).Finally,wesearhthroughthe l ' delaymaptofndadelayvetor,,thatmathes thebest.Tofndthebestmath,weonsiderthedelayve­torsinthedelaymapasforminganN­dimensionaldelay 
' spaeandfndthe"nearest"neighborofinthisspae. WeuseEulediandistaneasthemeasureofdistaneinde­ ' layspae 
theEulediandistanebetweenandis (dl-d')2++(dN-d')2.Onethenearestneighbor lN indelayspaehasbeenfound,theorrespondingloation 
reordedinthedelaymapisthenGeoPing'sestimateofthe loationofthetargethostT. SeveralaspetsofNNDSontributetoitsrobustness:(a) 
delayismeasuredfrommultipledistributedloationsrather thanasingleloation,(b)theminimumamongseveralde­laysamplesisonsideredratherthantheindividualdelay 
samples,and()thedelaysmeasurementsareusedasa"sig­nature"ofageographiloationratherthanbeingdiretly translatedintodistanesandloationoordinates. 
Typially,thedelayvetorsorrespondingtogeograph­iallyproximateloationsarelusteredtogetherindelay spae.However,thisisnotessentialforNNDStobeef­fetive.Sitesloatedinthesameitybutonnetedvia 
diferentISPsmayformmorethanonedistintlusterin delayspae.However,aslongasthenumberoflusters remainssmall,NNDSwillstillbeefetive. 
WenowturntoevaluatingtheperformaneofGeoPing employingNNDS. 5.2.1 Experimental Results Weusethedelaymeasurementsfromthel4probema­hinestothe265hostsinUnivHoststopopulatethedelay 
map.WealsousethehostsinUnivHostsasthetarget hostsforperformaneevaluation.Givenatargethost,T, inUnivHostswhoseloationwearetryingtodetermine,we 
exludealldatapointsorrespondingtoTinthedelaymap beforeapplyingtheNNDSalgorithm.Westudytheimpat ofthenumberanddistributionofprobemahinesonthe 
aurayoftheloationestimate.Foragivennumberof probes(sayn),weomputethemeanerrordistaneasthe averageoveralltheerrordistanesorrespondingtoseveral 
geographiallydistributedplaementsofnprobeloations hosenfromthesetofl4possibleloations.Forexample, for2probes,weaveragetheerrordistaneoverdiferent 
plaementsof2probesingeographiallydispersedloations amongthel4possibleloations.Duetothelargenum­berofpossibleombinationsforertainvaluesofn(suhas 
n=7),wedonotneessarilyonsiderallpossiblehoiesof nprobesoutofthesetofl4. Figure6showsseveralperentilelevelsoftheerrordis­taneasafuntionofthenumberofprobes.Forexam­ple,the75thperentileurveorrespondstothedistaneat 
whihtheCDFplotofmeanerrordistanerossesthe0.75 probabilitymark.FromFigure6,weinferthattheerror distaneinitiallydereasessharplyasthenumberofprobes 
inreases,thenstabilizesandreahesanoptimalvaluebe­tween7and9probeloations,andfnallyinreasesslightly Figure6:Errordistaneversusnumberofprobes. 
forhighervalues.Thissuggeststhathaving7to9probes wouldbeidealfortheNNDSalgorithm.Itisalsoenourag­ingtonotethatNNDSwith7probeshasanerrordistane 
ofonlyaboutl50kmatits25thperentile.Ourresults suggestthatnetworkdelayanindeedbeusedtodeter­minegeographiloation,albeitataoarsegranularity.We 
expetNNDStoperformevenbetterwithadelaymapon­strutedusingamoreextensivetrainingdatasetandplan toinvestigatethisisfutureresearh. 
Wehavealsoinvestigatedtheimpatofvariousprobe plaementstrategiesontheaurayofloationestimation. Wehaveexaminedtheefetsofprobeplaementontheer­rordistribution.Ourfndingsindiatethatageographially 
well­distributedsetofprobesyieldsbetterauraythana lusteredsetofprobes.Forinstane,themedianerrordis­tanewithaprobeeahatStanfordandIllinoiswasabout 
l9%lower(i.e.,better)thanaprobeeahatBerkeleyand SanDiego(bothofwhihareontheU.S.westoast).How­ever,wefoundthattheplaementofprobeshasasmaller 
impatonperformanethanthenumberofprobes.  5.3 Miscellaneous Issues Finally,wedisussafewmisellaneousissuespertaining 
toGeoPingandNNDS. OtherStatistialMethodologies BesidestheNNDSapproah,wehavealsoinvestigated otherstatistialtehniquesforestimatingloationfromde­laymeasurements.Inpartiular,wetriedonstrutingan 
approximatemodelthatapturestherelationshipbetween delayanddistanebygeneratingaprobabilitydensityfun­tionforeverysourebasedonalargesetofmeasurements. 
However,noneofthealternativetehniqueswasableto mathNNDSintermsofauray. ImpatofCongestionandICMPTraÆ Asmentionedearlier,networkongestionanintrodue 
signifantnoiseinthedelaymeasurements,therebyde­gradingtheaurayofGeoPing(andotherdelay­basedap­proahes).Ourexperimentssuggestthatl0­l5delaysam­plesaregenerally(butnotalways)suÆienttodetermine 
theminimumdelaywithhighonfdene(i.e.,theminimum delaygenerallydidnotgetanylowerbeyondthefrstl0­l5 samples).However,sendingorreeivingseveralICMPpak­ets(forping)tothetargethostfromeahprobeloation 
maybeundesirable,bothbeauseitmayaggravateonges­tionandbeauseitmayraiseafagwithintrusiondetetion systems.Wedisussawayofalleviatingthisproblemin 
Setion6.5. TheLastMile InourevaluationofGeoPingwehaveonlyonsidered hostsintheUnivHostsdataset.Thesearetypiallywell­onnetedhostsonuniversityampuses.Theorrelationbe­tweendelayanddistanemaybreakdownwhenweonsider 
hostswitha"last­mile"linkthathasalargedelay(forex­ample,adialuplinkorasatellitelink).Whilethisislearly 
problematiforGeoPing,wemaybeabletoworkaroundit inertainsituations.Forinstane,ifweareabletotellthat theuserisonadialupline(saybasedontheobservedband­widthtotheuserortraeroutemeasurements),weoulduse 
GeoPingtodeterminetheloationofthelastrouter(typ­iallyloatedatthedialupISP'spoint­of­presene)along thepathtothetargethost.Thisloationmayserveasa 
goodapproximationfortheloationofthetargethostsine userstendtodialintomodembanksintheirloalarea.  6. 
THE GEOCLUSTER TECHNIQUE TheGeoClustertehniqueisdiferentfromGeoTrakand GeoPinginthatitdoesnotdependonativenetworkmea­surements.Insteaditusesknowledgeofnetworkroutingin­formationandloationinformationforafewhoststobuild 
aloationmapforalargesubsetoftheIPaddressspae. GeoClusteroperatesasfollows.First,theIPaddress spaeisbrokenupintolusterssuhthatallhostswithIP 
addresseswithinalusterarelikelytobeo­loated2 ,i.e., theaddressesformageographiluster.Then,knowingthe 
loationorrespondingtoafewhostsinaluster(andas­sumingtheloationsarelargelyinagreement),GeoCluster deduestheloationoftheentireluster. 
ThekeytotheoperationofGeoClusterisIP­to­loation mappinginformationobtainedfromsouressuhastheones mentionedinSetion3.5.(Wedisussthegeneralproblemof 
obtainingsuhdatainSetion6.5.)However,thismapping informationtendstobepartialinoverage(sineitinludes loationinformationonlyforarelativelysmallsubsetofthe 
IPaddressspae)andpossiblyinaurate.Theseproblems limittheutilityoftheIP­to­loationmappingdata. GeoClusteraddressesbothoftheseproblemsbylustering 
IPaddressesaordingtotheir(likely)loation.Clustering helpsexpandtheoverageofthepartialIP­to­loationmap­pinginformation.Theaggregationofloationinformation 
alsoenablesustoidentifyandeliminateoutliersausedby inauraiesintheindividualloationdatapoints. Asanexample,supposeweknowthatl28.l27.l26.0/243 
formsageographiluster.Furthermoreassumethatthe partialmappinginformationtellsusthattheloationorre­spondingtol0diferentIPaddressesinthislusterisSeattle 
whilethatorrespondingtooneotherIPaddressisBoston. ThenweanreasonablydeduethattheBostondatapoint 2Thegranularityoftheloationdependsontheappliation 
ontext. 3 Thenotationa.b..dlmdenotesanaddresssliewithapre­fxoflengthmbitsspeifed. iserroneousandthatallofthe(256)IPaddressesinthis 
luster(iftheyareindeedinuse)arelikelytoorrespondto hostsin(ornear)Seattle. 6.1 Identifying Geographic 
Clusters Identifyinggeographilustersisahallengingproblem. ThebasiapproahusedbyGeoClusteristoombinepar­tialIP­to­loationmappinginformationwithnetworkrout­inginformation.Webuildontheworkpresentedin[l2]on 
identifyingtopologiallusters.Addressalloationandrout­ingintheInternetishierarhial.Routinginformationisag­gregatedarosshoststhatareunderasingleadministrative 
domain(alsoknownasanautonomoussystem(AS)).For example,theroutesforhostsonauniversityampuswould typiallybeadvertisedtotherestoftheInternetasasingle 
aggregate,sayastheaddressprefxl28.l27.0.0/l6,rather thanas65536individualIPaddresses.Thusknowledgeof 
theaddressprefxes(APs)usedbytheroutingprotoolen­ablesustoidentifytopologiallusters,asobservedin[l2]. 
WesurmisethatAPsarealsolikelytoonstitutegeographi lusters.Weelaborateonthisbelow. WederiveinformationonAPsfromthebordergateway 
protool(BGP)usedforinter­domain(i.e.,inter­AS)rout­ingintheInternet.EahentryintheBGPtableatarouter speifesadestinationAPandtheAS­levelpathleadingto 
it.Forourpurposes,weareonlyinterestedintheAPinfor­mation,soweonstrutalistofuniqueAPs(overl00000 APs,asmentionedinSetion3.4).ThenumberofAPsis 
anorderofmagnitudelargerthanthenumberofASs.This isbeauseanAS,suhasanISP,mayadvertisemorespe­ifroutes(sayforertainustomers)duetopoliyand/or 
performaneonsiderations(e.g.,forloadbalaning). AnAS(anditsassoiatedAP(s))oftenorrespondstoa geographiallustersuhasauniversityampusoraom­panyoÆe.EvenwhentheASisanISPwithlargege­ographioverage,theassoiatedAPsthatareadvertised 
viaBGPmaybemorespeif(sayorrespondingtoindi­vidualustomers),asexplainedabove.Inboththeseases, GeoClusterisinagoodpositionabletoidentifygeographi 
lustersfromAPinformation.However,largeISPs(e.g., AT&#38;T,Sprint,UUNet,et.)oftenadvertiseonlyaggregate 
APsforreasonsofsalability.Insuhases,asingleAP mayspanalargegeographialarea.Thisproblemwouldbe alleviatedifwehadmoredetailedknowledgeofhowalarge 
aggregateissubdividedbytheintra­domainroutingproto­olusedwithintheISPs.However,obtainingsuhinfor­mationwasnotfeasibleforus,soweonlyuseinter­domain 
routinginformationderivedfromBGP. Insummary,ourbaselineGeoClusteralgorithm,whihwe termBGPonly,disoversAPsbasedonBGPdataandsur­misesthattheseAPsaregeographilusters.However,as 
explainedabovethisonjeturemaynotbealwaysorret, forinstanewhenISPsonlyadvertiselargeaggregates.We nowpresentasub­lusteringalgorithmdesignedtoaddress 
thisproblem.WetermthevariantofGeoClusterthatin­orporatesthisalgorithmasBGP+sublustering. 6.2 Sub-clustering 
Algorithm TheBGP+sublusteringvariantofGeoClusterdepends onlyoninter­domainBGPdatajustlikeBGPonly.Butthe 
novelideaistousepartialIP­to­loationmappinginforma­tiontosubdivideAPsthathavealargegeographispread. ForeahoriginalAPobtainedfromE­BGP,weusetheIP­to­loationmappinginformationtodeterminewhethertheir 
is"signifant"onsensusonthegeographiloationofthe AP.Ifthereis,thenwedelaretheAPtobeageographi luster.Ifnot,wesubdividetheAPintotwohalves(e.g.,the 
APl52.l53.0.0/l6wouldbesubdividedintol52.l53.0.0/l7 andl52.l53.l28.0/l7)andrepeatthetestoneahhalf.We 
stopwhenthesubdivisionontainstoofewIP­to­loation mappingdatapointsforareliabledeterminationofgeo­graphilusteringtobemade.Intheend,weobtaina 
mappingfromAPs(bothoriginalandsubdividedones)to loation.GivenanIPaddress,wefrstfndthemathing APusinglongestprefxmathandthenreporttheorre­spondingloationastheloationoftheIPaddress. 
HereisthepseudoodeforGeoCluster,inludingthesub­lusteringalgorithm.LetIPLolistbethelistofIP­to­loationmappingdatapointssortedbyIPaddress,BGPAPlist 
bethelistofAPsobtainedfromE­BGPinformation, IPLoAPlistbethesortedlistobtainedbyaugmentingthe entriesinIPLolistwiththeAPsorrespondingtothe 
longestprefxmath,newAPLolistbethenewlistmap­pingAPstoloationobtainedby(possibly)subdividingthe originalAPs,andthreshbetheminimumthresholdon 
thenumberofIP­to­loationmappingdatapointswithina subdivision. /*initialization*/ IPLolist=sortedIP-to-loationmapping 
BGPAPlist=APsderivedfromE-BGPinfo /*determinemathingAPs*/ foreah((IP,loation)inIPLolist){ AP=LongestPrefixMath(IP,BGPAPlist) 
Add(IP,loation,AP)toIPLoAPlist } /*subdivideAPsusingIPLoAPlist*/ sameAPlist=EMPTY urAP=APinfirstentryofIPLoAPlist 
foreah((IP,loation,AP)inIPLoAPlist){ if(APin(IP,loation,AP)==urAP){ /*ontiguouslistwithsameAP*/ Add(IP,loation,AP)tosameAPlist 
 }else{ /*SubdivideurAPasappropriate*/ if(lsameAPlistl?thresh){ if(sameAPlistisgeographiallylustered){ 
avgLoation=averageloationofluster Add(urAP,avgLoation)tonewAPLolist }else{ DivideurAPintotwoequalhalves 
DividesameAPlistaordingly Reursivelytestwhethereither/bothof subdivisionsformageographiluster } } /*reset/reinitializesameAPlist*/ 
sameAPlist=NULL Add(IP,loation,AP)tosameAPlist } } newAPLolististhenewlistusedfor IP-to-loationmapping 
Hereisasimpleexamplethatillustratestheoperation ofthesub­lusteringalgorithm(assumethatthresh=l5). ConsideranISPwhoownstheaddressspael52.l53.0.0/l6. 
SupposethattheISPhasalloatedhalfoftheaddressspae (l52.l53.0.0/l7)toaustomerinNewYork,andaquar­tereah(l52.l53.l28.0/l8andl52.l53.l92.0/l8)tous­tomersinDallasandSanFraniso,respetively.Suppose 
thatthepartialIP­to­loationmappinginformationindi­atesthattheloationisNewYorkfor50IPaddressesin l52.l53.0.0/l7,Dallasfor20addressesinl52.l53.l28.0/l8, 
andSanFranisoforl0addressesinl52.l53.l92.0/l8.The ISPonlyadvertisesthel52.l53.0.0/l6prefxviaBGP,so thesub­lusteringalgorithmstartswithl52.l53.0.0/l6as 
thepresumedgeographiluster.However,thereisnot suÆientonsensusontheloationofthisluster,sothe lusterissubdividedintotwohalves,l52.l53.0.0/l7and 
l52.l53.l28.0/l7.ThereissuÆientonsensusforthefor­meraddressprefx,sothealgorithmdelaresl52.l53.0.0/l7 
asageographilusterwithitsloationasNewYork.How­ever,l52.l53.l28.0/l7stilllaksonsensus,soitissubdi­videdintol52.l53.l28.0/l8andl52.l53.l92.0/l8.Thereis 
suÆientonsensusontheloationorrespondingtol52.l53.­l28.0/l8,soitisdelaredasageographilusterwithits loationasDallas.However,therearefewerthanthresh 
IP­to­loationdatapointsforl52.l53.l92.0/l8,sothealgo­rithmterminateswithoutdelaringitasageographilus­ter. 
Theefetivenessofthesub­lusteringalgorithmdepends ontherihnessofthepartialIP­to­loationmappingdata available.IfinsuÆientdataisavailableforertainAPs, 
thesewillnotbeinludedinnewAPLolist.SoGeoCluster willbeunabletodeterminetheloationofIPaddressesthat maththoseAPs. 
Wehavenotspeifedhowitisdeterminedwhetheraset ofloationsisgeographiallylustereredorhowtheon­sensusloationofalusterisomputed.Theanswersto 
bothofthesequestionsareontext­dependentdependent onthegranularityoftheloationinformationontainedin thepartialIP­to­loationmappingandontheneedsofthe 
appliation. Inasetheloationinformationisrelativelyfne­grained (e.g.,zipodes),theloationoftheindividualpointsis 
quantifableusinglatitudeandlongitude.Soweompute aompositeloationusinglinearaveragingofthelatitudes andlongitudes4.Wealsoomputeadispersionmetrias 
 follows:dispersion=zELdist(llavg)/lLl,whereL issetofloationdatapointsorrespondingtotheluster, lavgistheompositeloationomputedviaaveraging,and 
dist(xy)isthegeographidistanebetweentheloationsx andy.Intuitively,thedispersionquantifesthegeographi 
extentorspreadofaluster.Wedeidewhetherasetoflo­ationsisgeographiallylusteredbyhekingwhetherthe dispersionissmallerthanathreshold. 
Inaseloationinformationisoarse­grained(e.g.,states), wetestwhetherthereareatleastthreshdatapointsinthe 
lusterandwhetheratleastathresholdfration,fthresh, ofthepointsagreeonloation.Ifbothonditionsaremet, thentheonsensusloationisassignedtotheentirelus­ter.Asmentionedearlier,thisaggregationproedurehelps 
eliminateerrorsduetoerroneousloationinformation. 6.3 Impact of Proxies and Firewalls ManyInternetlientsliebehindproxiesand/orfrewalls 
thatseparatetheorporateorISPnetworkfromtherestof 4 Whilenotstritlyorret,suhaveragingisagoodapprox­imationwhentheindividualpointsarelosetoeahother 
theInternet.Insuhasetting,theproxyorfrewalltypially onnetstoexternalInternethosts,suhasWebservers,on 
behalfofthelienthosts.TheIPaddressofthelienthosts remainshiddenfromtheexternalnetwork.Assuhthereis nodiretwaytomapfromIPaddresstoloationforsuh 
lients.(Afterallweareinterestedintheloationofthe lient,notthatoftheproxyorthefrewall.) Thesub­lusteringalgorithminGeoClusterdealswith 
thisissueelegantly.Ifthesetoflientsthatonnetvia agroupofproxies(havingIPaddressesthatareontained withinanaddressprefxAP)islusteredgeographially 
(sayatloationL),thengivenasuÆientnumberofIP­to­loationdatapoints,thesub­lusteringalgorithmwill (orretly)dedueanassoiationbetweentheaddresspre­fxAPandtheloationL.Thisiswhathappenssayin 
theaseoflientsonauniversityororporateampus,or lientsofanISPthatonnetviaaloalorregionalproxy. However,thereareinstanes,suhaswiththeISPAmer­iaOnline(AOL),wherelientsingeographiallydispersed 
loationsshareaommonpoolofproxies.(WithAOLwe haveseenlientsthousandsofkilometersapartonnetvia aproxywiththesameIPaddress!)Insuhaase,our 
sub­lusteringalgorithmwillnotfndsuÆientonsensusto beabletoidentifyanygeographilusters,soitwillnot trytomapthe"lient"IPaddresstoaloation.Webelieve 
thisisanimportantpropertyofthesub­lusteringalgorithm beauseformanyappliationsahighlyinaurateloation estimatemaybestritlyworsethannoloationestimateat 
all.Forinstane,displayingageneriadvertisementona NewYorkuser'ssreenwouldprobablybebetterthanmis­takenlydisplayinganadvertisementtailoredforCalifornia 
residents.  6.4 Experimental Results WenowanalyzetheperformaneofGeoClusterinseveral waysusingavarietyofdatasets.Weomparetheperfor­maneofGeoClusterwiththatofGeoTrakandGeoPing. 
WeanalyzetwovariantsofGeoCluster:(l)onlyusingAP informationderivedfromBGPtables(BGPonly),and(2) post­proessingtheBGPtablesusingthesub­lusteringal­gorithmdisussedinSetion6.2(BGP+sublustering).We 
omparebothvariantsagainstasimplistiapproahthat ignoresBGPinformationandassumesthatallAPstohave a24­bitprefxlength(l24­lusters). 
 6.4.1 Locating hosts in UnivHosts WefrstanalyzetheabilityoftheBGPonlyvariantof GeoClusterindeterminingtheloationofhostsintheUni­vHostsdataset(Setion3.3).WeusepartialIP­to­loation 
mappingdataontainedintheFooTVdatasetasinput. WeonverteahzipodeontainedintheFooTVdata totheorresponding(approximate)latitudeandlongitude. 
Wethenlusterthe(IP,latitude,longitude)datapointsus­ingBGPaddressprefx(AP)informationandomputethe ompositeloationforeahAP(Setion6.2).Givenatar­getIPaddress,wefndthemathingAPusinglongestpre­fxmathanddelaretheorresponding(latitude,longitude) 
pairastheloationestimate.Wequantifytheaurayof theloationestimateusingtheerrordistane. Figure7showstheCDFoferrordistaneforGeoClus­teromputedoverthe265universityhosts.Wealsoshow 
theCDFsofGeoTrakandthebestaseofGeoPing(us­ing9probemahines)foromparison.GeoClusterisable  GeoTrack GeoPing 
GeoCluster Error Distance Dispersion 4500 1 4000 3500 0.8 3000 Distance (kilometers) 0.6 2500 2000 
1500 1000 CDF 0.4 0.2 0 0 1000 2000 3000 4000 Error distance (kilometers) Figure7:CDFoftheerrordistaneomputedover 
theUnivHostsdatasetforGeoTrak,GeoPing,and GeoCluster. todeduetheloationofonly233outofthe265university 
hosts(i.e.,about88%ofthehosts).ThisisbeausetheIP­to­loationmappingdataderivedfromFooTVispartialin overage,anddespitethelusteringperformedusingBGP 
data,westillhavenoloationinformationforaboutl2%of thehosts.However,forthevastmajorityofhostswhoselo­ationitisabletodetermine,GeoClustersignifantlyout­performsbothGeoTrakandGeoPing.Forinstane,the 
medianand80thperentilemarksforGeoClusterare28km and226km,respetively.Theorrespondingnumbersare l02kmand384kmforGeoTrak,and382kmandl20lkm 
forGeoPing. GeoClusterperformswellontheUnivHostsdatasetbe­ausethesehostsareoftenlusteredtogethergeographially 
onuniversityampuses.Moreover,manyuniversitieshave distintaddressalloations(e.g.,l50.l3l.0.0/l6fortheUni­versityofMontana)thatareadvertisedviaBGPasdistint 
addressprefxes(APs).SoGeoClusterisabletoidentifythe universitiesasgeographilusterswithrelativeease. 
 6.4.2 Locating hosts in bCentral WenowanalyzetheperformaneofGeoClusterusingthe muhlargerbCentraldataset.Thisdatasetontainsl8l246 
uniqueIPaddressesandtheirorrespondingzipodes.(As notedinSetion3.5,thezipodeinformationmaynotbe entirelyaurate.Hene,unliketheaseofuniversityhosts, 
wearenotentirelyertainofthetrueloationsofthebCen­trallienthosts.)Asbefore,weusetheBGPonlyvariant ofGeoCluster,withtheFooTVandtheBGPdatasetsas 
inputstoprimetheGeoClusteralgorithm. ForeahIPaddressinbCentral,weestimateitsloation andthenomputetheerrordistane.Theerrordistane, 
withtheIPaddressessortedininreasingorderoferrordis­tane,isshowninFigure8.WeobservethatGeoClusteris onlyabletoestimateloationforabout77%ofthel8l246 
hosts.The25th,50th(median),and75thperentilemarks oftheerrordistaneare84km,685km,and3056kmre­spetively.Inotherwords,GeoClusterperformsmuhworse 
forthebCentraldatasetthanfortheUnivHostsdataset. Themainreasonfortheworseperformaneisthatthe bCentraldatasetismuhmorediversethantheUnivHosts 
dataset.UnlikeUnivHosts,manyoftheIPaddressesin bCentralfallwithinAPsorrespondingtolargeand 500 0 IP address 
sequence number (1000s) Figure8:Theerrordistaneandthedispersionfor hostsinbCentral. geographially­dispersedISPs(e.g.,l2.0.0.0/8belongingto 
AT&#38;TWorldNet)orbelongtoproxiesorfrewalls(e.g., AOLproxies).HeneGeoClusterisonlyabletodetermine loationauratelyforasmallerfrationofthehosts. 
Giventhewiderangeoferrordistanesfordiferenthosts, itwouldbeusefultobeabletotellwhenGeoCluster'ses­timateisaurateandwhenitisnot.Forthispurpose,we 
omputethedispersionmetriforeahAP(Setion6.2). Wewouldexpetthatthelargerthedispersionis,theless aurateGeoCluster'sestimateofloationwouldbe.Thisis 
borneoutbyFigure8,whihdepitsthe(smoothedversion of)dispersionurveforthebCentraldataset.Infat,the dispersionurvemathestheerrordistaneurvequitewell 
(exeptforhostsattheextremeright).Thismakesintuitive sensesinetheerrorinloationestimationresultsfromthe 
geographispreadofAPs,anditisexatlythisspreadthat thedispersionquantifes. Attheextremerightofthegraph,weseethaterrordis­taneshootsupwhilethedispersiondropssharply.Tobet­terunderstandthispuzzlingphenomenon,wetookaloser 
lookattheorresponding(IP,zip)datapointsinbCentral. Basedonthisexamination,wehaveometotheonlusion thatthedisrepanyisausedmainlybylientsthatdial 
inremotely.Forexample,bCentralontainstheIPaddress l40.247.l47.42(DNSnameroaml47­42.student.harvard.edu), 
whihpresumablyorrespondsadialuponnetionatHar­vardUniversityinthenortheasternorneroftheU.S.(and whihiswhatGeoClusterdeduestheloationtobe).How­ever,theorrespondingloationreordedinthebCentral 
datasetisPortland,Oregon,4000kmawayinthenorth­westernorneroftheU.S.Wehypothesizethatthisdisrep­anyisduetoauserinPortlandremotelydialingintoa 
modembankatHarvardandthenonnetingtobCentral. However,itisdiÆulttoknowforsurethePortlandlo­ationmaysimplybeerroneous,inwhihasethe(large) 
errordistanewouldbemisleading. OurresultssuggestthatGeoClusterwouldnotperform aswellforadiversesetofhostsasfortheuniversityhosts. 
Stilltheerrordistaneisrelativelysmall(withinaoupleof hundredkilometers)forasubstantialfration(around40%) 
ofthehosts.And,quiteimportantly,GeoClusterisself­alibratinginthesensethatitisoftenabletotellwhena loationestimateislikelytobeaurateandwhenitisnot. 
 6.4.3 Importance of the sub-clustering algorithm ThusfarwehaveonsideredtheBGPonlyvariantofGeo­Cluster,whihonlyusesAPinformationderiveddiretly 
fromBGPdata.WenowturntotheBGP+sublustering variantthatemploysthesub­lusteringalgorithm(Setion 6.2)toonstrutanAP­to­loationmapping.Thisalgo­rithmmakesuseofbothBGPdataandpartialIP­to­loation 
mappinginformation.Weareinterestedinstudyingwhat beneft,ifany,thesub­lusteringalgorithmofers. WeusethepartialIP­to­loationmappingdataobtained 
fromHotmail(Setion3.5)asinputtothesub­lustering algorithm.ReallthattheloationinformationinHotmail isatthegranularityofstates.AsdisussedinSetion6.2, 
wedeemanAPtoorrespondtoageographilusterifit ontainsatleastthreshdatapointsdrawnfromtheIP­to­loationmappingdatasetandatleastafrationfthresh 
ofthosedatapointsagreeonloation(i.e.,orrespondto thesamestate).Inmostoftheresultsshownhere,weset thresh=20andfthresh=07anddenotethisas(2007). 
Wealsobriefydisussresultsforthe(5,0.6)setting. WeusebCentralasthetestdata.Theloationinforma­tioninbCentralisatthegranularityofzipodeswhereas 
thatinHotmailisatthegranularityofstates.Thisraises thequestionofhowtoquantifyauray.Wedeidedtodo allofouralulationatthegranularityofthestates.We 
mapthezipodesinbCentraltotheorrespondingstates. Wethenomputethezipenterofeahstatebyaveraging theoordinatesofthezipodesontainedwithinthatstate 
(Setion3.5).Theerrordistaneisthenomputedasthe distanebetweenthezipentersoftheatualanddedued states.Sotheerrordistaneiszeroifthestateisdedued 
orretlyandnon­zerootherwise. Figure9:CDFoftheerrordistane(omputed atthegranularityofstates)fortheBGPonlyand 
BGP+sublusteringvariantsofGeoCluster,andfor the/24-lustersmethod. Figure9showstheCDFoferrordistane.Weobserve 
thatBGP+sublusteringsignifantlyoutperformsBGPonly. Inpartiular,withthe(2007)settingBGP+sublustering getsthestateright(i.e.,anerrordistaneofzero)for53% 
ofthehostswhileBGPonlydoessoonlyfor36%ofthe hosts.ThereasonisthatBGPonlyisoftenstukwith largeandgeographiallydispersedAPsobtaineddiretly 
fromBGPdatawhilethesub­lusteringalgorithmisof­tenabletobreakthesedownintosmallerandgeographi­allymoreompatAPs.Itisinterestingtonotethateven 
/24­lusters,whihompletelyignoresBGPdata,outper­formsBGPonlyslightly,althoughitisstillmuhworsethan BGP+sublustering. 
Finally,weseethatBGP+sublusteringperformsslighly betterwiththe(506)settingomparedto(2007)(the orretstateisdeduedfor56%ofthehostsomparedto 
53%).Neverthelesswebelievethata(506)settingmay betooaggresiveinthesensethatitmayoftenmisidentify geographilusters(afterall(506)requiresjust3outof 
5datapointstoagreeonloationforanAPtobedeemed ageographiluster).Wearepresentlyinvestigatingthis issuefurther. 
  6.5 Discussion Insummary,GeoClusteremploysanovelalgorithmthat ombinespartialIP­to­loationmappinginformationwith 
BGProutinginformationtomakeanintelligentdetermina­tionofalient'sloation.Thealgorithmisabletotoleratea 
limitedamountofinaurayintheIP­to­loationmapping informationandremainefetiveinertainsituationswhere lientsonnetviaproxiesorfrewalls. 
Aninterestingquestionishowonewouldobtainpartial IP­to­loationmappinginformationingeneral.Thereare severalpossiblewaysonemightdothis. 
l.Thelikelyloationofauseranbeinferredfromthe kindofinformationaessedorqueriesissuedbythe user(forexample,asintheaseofFooTV).Sineit 
onlyonsiderssuhinformationinanaggregatedform (orrespondingtolusters),GeoClusterisabletotol­eratealimitedamountofinaurayintheinferene. 
2.CertainWebsites,suhasYahoo[32],oferamixof generiontent(e.g.,news)anduser­speifontent (e.g.,email).PartialIP­to­loationmappinginforma­tionmaybederivedfromaessesmadebyregistered 
userstothelatterontentandthenusedinonjun­tionwithGeoClustertoinfertheloationof(thepre­sumablymuhlargernumberof)registeredandasual 
userswhoaessgeneriontent. Ingeneral,weexpetthattherewillbearelativelysmall numberofontentprovidersand"loationservers"(akin 
toadvertisementserverssuhasDoubleClik[23])thatwill employGeoCluster(andpossiblyothertehniques)tomap IPaddressestogeographiloations.Thevastmajorityof 
Websiteswouldsimplysubsribetotheserviesprovidedby theloationserversandsowouldnotneedtobeonerned withthedetailsoftheloationmappingtehniques. 
Onafnalnote,webelievethattheideainGeoClusterof lusteringhoststogetherbasedongeographiloationmay bequiteusefulinonjuntionwithGeoTrakandGeoPing. 
BothGeoTrakandGeoPingondutativemeasurements byinjetingtraÆintothenetwork.Thismaybeundesir­ableforseveralreasons(networkload,seurity,et.).Clus­teringanalleviatethisproblembymakingitunneessary 
todopingsortraeroutestoeahnewtargethost.Itmay suÆetodothesemeasurementstojustafrationofthe hostswithinanaddressprefxluster.Infat,GeoTrak 
andGeoPing,usedinthismanner,anhelpGeoClusteron­strutthepartialIP­to­loationmappingthatitneeds.  7. SUMMARY 
AND CONTRIBUTIONS Inthispaperwehaveexaminedtheinterestingbuthal­lengingproblemofdetermingthegeographiloationofan 
InternethostknowingonlyitsIPaddress.Wehavede­signedandevaluatedthreedistinttehniques,olletively referredtoasIP2Geo,toaddressthisproblem:(a)Geo­Trak,whihextratsloationinformationfromDNSnames 
ofhostsandrouters,(b)GeoPing,whihdeterminesloa­tionusingnetworkdelaymeasurementsmadefromseveral knownloations,and()GeoCluster,whihombinespar­tialIP­to­loationmappinginformationwithBGProuting 
datatodetermineloation.Thesetehniquesspanabroad spetrum.Ourevaluationofthesetehniqueswasbasedon extensiveandvarieddatasets. 
OurfndingssuggestthatGeoClusteristhemostpromis­ingoneoftheIP2Geotehniques.Themedianerrordis­taneforGeoClustervariesfrom28kmforwell­onneted 
universityhoststoafewhundredkilometersforamorehet­erogeneoussetoflients.Importantly,however,GeoCluster 
isself­alibratinginthatthedispersionmetriofersanin­diationofhowauratealoationestimateislikelytobe. Furthermore,thesub­lusteringtehniqueisoftenableto 
infermorefne­grained(geographi)strutureinInternet addressrangesthanispresentinBGProutingdata.Both thesefeaturesmakeGeoClustermoresuitablethantheother 
tehniquesinthepreseneoflientsthatonnetviaprox­ies.Finally,GeoClusterispassiveinthatitdoesnotinjet extratraÆintothenetwork. 
OurinvestigationofGeoTrakandWhois­basedtehniques revealsthefundamentallimitationduetoproxies.Oureval­uationofGeoPingsuggeststhatontrarytoonventional 
wisdomthereisasignifantorrelationbetweennetwork delayandgeographidistanethatanbeexploitedtode­termineoarse­grainedloation.Webelievethiswillbethe 
aseevenmoreastheInternetbeomesrihlyonneted. Ourstudyalsoindiatesthatgeographyanbeaninter­estingtoolforanalyzingthebehaviorofnetworkrouting. 
Theratiooflinearizeddistanetogeographidistaneisin­diativeofhow"diret"anetworkrouteis.Alargeratio maybeindiativeofananomalousroute.Forinstane,by 
omputingthisratio,GeoTrakwasabletoautomatially faganahighlyiruitousroutefromAustin,TexastoKen­tukyviaCalifornia,NewJersey,andIndiana! 
Besidesthespeiftehniquesthatwehavedeveloped, webelieveanimportantontributionofourpaperisthat thesystematistudyoftheIP­to­loationmappingproblem 
usingawiderangeofinterestingdatasets. Acknowledgements GeorgeChung,AlexDaunys,ChengKu,andDaveQuik helpedusobtaintheHotmail,bCentral,andFooTVdata 
sets.CraigLabovitzhelpedusgatherBGPdata.Donald WysokiprovideduswithgeographidataforU.S.ities andzipodes.ArvindArasu,B.R.Badrinath,MaryBaker, 
PaulBarford,JohnByers,ImrihChlamta,MikeDahlin, KevinJafey,RandyKatz,CraigLabovitz,PaulLeyland, KarthikMahesh,VijayParthasarathy,JerryPrine,Amin 
Vahdat,SrinivasanVenkatahary,GeofVoelker,MarelWald­vogel,andDavidWoodhelpedusobtainaesstotheprobe mahines.RandyKatzandtheanonymousSIGCOMMre­viewersprovidedusefulfeedbakonanearlierversionofthis 
paper.Wewouldliketothankthemall. 8. REFERENCES <RefA>[l]P.BahlandV.N.Padmanabhan.RADAR:An In­BuildingRF­BasedUserLoationandTraking 
System.IEEEInfoom,Marh2000. [2]G.Ballintijn,M.vanSteen,andA.S.Tanenbaum. CharaterizingInternetPerformanetoSupport 
Wide­areaAppliationDevelopment.Operating SystemsReview,34(4):4l­47,Otober2000. [3]L.S.Brakmo,S.W.O'Malley,andL.L.Peterson. 
TCPVegas:NewTehniquesforCongestionDetetion andAvoidane.ACMSIGCOMM,Augustl994. [4]K.Cheverst,N.Davies,K.Mithell,andA.Friday. 
ExperienesofDevelopingandDeployinga Context­AwareTouristGuide:TheGUIDEprojet. ACMMobiom,August2000. 
[5]R.Droms,DynamiHostConfgurationProtool, RFC­l53l,IETF,Otoberl993. [6]P.EngeandP.Misra,TheGlobalPositioningSystem, 
Pro.oftheIEEE,Januaryl999. [7]R.GovindanandH.Tangmunarunkit.Heuristisfor InternetMapDisovery.IEEEInfoom,Marh2000. 
 [8]K.Harrenstien,M.Stahl,E.Feinler,NICKNAME/ WHOIS,RFC­954,IETF,Otoberl985. [9]AndyHarterandAndyHopper.ADistributed 
LoationSystem,fortheAtiveOÆe.IEEENetwork Vol.8No.l,Januaryl994. [l0]A.Harter,A.Hopper,P.Steggles,A.Ward,andP. 
Webster,TheAnatomyofaContext­Aware Appliation,ACMMobiom,Augustl999. [ll]V.Jaobson,Traeroutesoftware,l989, 
ftp:llftp.ee.lbl.govltraeroute.tar.gz [l2]B.KrishnamurthyandJ.Wang.OnNetworkAware ClusteringofWebClients.ACMSIGCOMM,August 
2000. [l3]J.Y.Lietal.ASalableLoationServiefor GeographiAd­HoRouting.ACMMobiom,August 2000. [l4]D.Mooreet.al.WhereintheWorldis 
netgeo.aida.org?INET2000,June2000. [l5]R.Periakaruppan,E.Nemeth.GTrae AGraphial TraerouteTool.UsenixLISA,Novl999. 
[l6]U.Raz.Howtofndahost'sgeographiloation. http:llwww.private.org.illIP2geo.html [l7]D.C.Vixie,P.GoodwinandT.Dikinson.AMeans 
forExpressingLoationInformationintheDomain NameSystem,RFC­l876,IETF,Januaryl996. [l8]AkamaiIn.http:llwww.akamai.oml 
[l9]AmeriaOnline(AOL).http:llwww.aol.oml [20]BBNPlanetpubliallyavailablerouteserver, telnet:llner­routes.bbnplanet.net. 
[2l]bCentral.http:llwww.bentral.oml [22]DigitalIslandIn.http:llwww.digitalisland.oml [23]DoubleClik,http:llwww.doublelik.oml 
[24]Hotmail.http:llwww.hotmail.oml [25]Internet2.http:llwww.internet2.orgl [26]IPtoLatitude/LongitudeServer,UniversityofIllinois 
http:llello.s.uiu.edulgi­binlslammlip2ll [27]ListofAirportCodes. http:llwww.mapping.omlairportodes.html 
[28]MERITNetwork,http:llwww.merit.edul [29]NeoTrae,AGraphialTraerouteTool http:llwww.neoworx.omlprodutslneotraeldefault.asp 
[30]U.S.Gazetteer,U.S.CensusBureau, http:llwww.ensus.govlgi­binlgazetteer. [3l]VisualRoute,VisualwareIn., 
http:llwww.visualroute.oml [32]YahooIn.,http:llwww.yahoo.oml  </RefA>
			
