
 On Tiling Space-Time Mapped Loop Nests Some text in this electronic article is rendered in Type 3 or 
bitmapped fonts, and may display poorly on screen in Adobe Acrobat v. 4.0 and later. However, printouts 
of this file are unaffected by this problem. We recommend that you print the file for best legibility. 
[Extended Abstract] Martin Griebl University of Passau, FMI griebl@fmi.uni-passau.de ABSTRACT Automatiparallelizationofloopprogramsbasedonspae­timemappingtypiallyaimsatmaximalparallelism.In 
ordertoobtainreasonableperformane,thegranularityof theparallelismmustbeoarsened,e.g.,byapplyingtiling 
tehniques. Inontrasttoothers,wesuggesttoapplytilingafterthe omputationofaspae­timemapping.Thisextendsthe 
appliabilityofexistingtilingmethodsandsignifantlyim­proveseÆienyofparallelizedloopprograms. 1. INTRODUCTION 
Tilingisawell­knownlooptransformationtehniquefor ompileroptimization.Inloopprograms,multipleinstanes 
ofallstatementsinaloopbodyareexeuted.Weallthem operations.Theideaoftilingistooalesesetsofoper­ations.Tehnially,werestritourselvestotheasethat 
thesesets,thetiles,are(multidimensional)parallelepipeds. Theproblemareaaddressedinthispaperistilingforau­tomatiparallelization,espeiallyloopparallelizationinthe 
polytopemodel[3,8],whihisbasedonspae­timemap­ping,andextensionsthereof(thepolyhedronmodel[5]). Themethodsofthepolyhedronmodeltypiallyaimatmax­imalparallelism,notmaximalperformane,sinethelatter 
istooomplextobeomputedduringompilation.Hene, theresultingfne­grainedparallelismmustbeoarsenedin ordertoredueommuniationostandobtaingoodper­formane.Thisisourinterestintiling. 
 2. RELATED WORK Sofar,tothebestofourknowledge,tilingisalwaysapplied tothesoureprogram,fromtheseminalpaperofIrigoinand 
Triolet[7]uptomostreentpubliations[2].Unfortunately, theappliabilityofnearlyallofthesemethods(and,hene, 
anymethodwhihparallelizesthetiledprogram)isvery Permission to make digital or hard copies of part or 
all of this work or personal or classroom use is granted without fee provided that copies are not made 
or distributed for profit or commercial advantage and that copies bear this notice and the full citation 
on the first page. To copy otherwise, to republish, to post on servers, or to redistribute to lists, 
requires prior specific permission and/or a fee. SPAA 01 Crete, Greece &#38;#169; 2001 ACM ISBN 1-58113-409-6/01/07 
$5.00 limited:mostofthemonlydealwithperfetlynestedloops anduniformdependenes,someevenwithlimiteddimen­sionality.Theserestritionsallowforprovableoptimality 
withinthemethods'frameworks.Inontrast,ourgoalisto extendtheappliabilityoftiling. Reently,SongandLi[9]andAhmed,MateevandPingali[1] 
developedspeialtilingmethodsforimperfetlynestedloop programsintheframeworkofaheoptimization.However, 
tilingmethodsforaheoptimizationannotbeuseddi­retlyintilingforoarse­grainparallelism,evenifbothtry toimproveloality.Oneofthemaindiferenesisthe(miss­ing)existeneofdistribution(i.e.,parallelism)asaonfit­inggoalofloality.Ourappliationdomainistilingfor 
parallelizationfordistributedmemorysystems.(Caheop­timizationoneveryproessorisapossiblesubsequentstep.) 
 3. THE FRAMEWORK OF SPACE-TIME MAPPING Input:Methodsbasedonthepolytopemodeltakeasinput anarbitrarilynestedsequentialloopprogram.Onlyarrays 
areallowedasdatastrutures,andonlyloopsandondi­tionalbranhesasontrolstrutures. Output:Theresultofanyspae­timemappingisapairof 
twofuntions:asheduleandanalloation.Foreveryoper­ationintheprogram,theydetermineatwhihlogialtime andonwhihvirtualproessortheoperationisexeuted, 
respetively. Intheaseofthepolytopemodelweobtainmultidimen­sionaland(pieewise)aÆnefuntionsassheduleandallo­ation 
onepairperstatement. 4. TILING AFTER SPACE-TIME MAPPING Letusdisusssomeofthemainadvantagesoftilingafter 
spae­timemapping. Uniqueoordinates.Afterthespae­timemapping,all operationsoftheparallelizedloopnestareexpressed 
inoneunifedoordinatesystem,onsistingofspae andtimedimensions.Hene,wemayreusealltiling tehniqueswhihhavealreadyprovedusefulfortiling 
perfetlynestedloops. Flexibilityofparallelization.Ifweapplytilingtothe soureprogram,weoaleseoperationsbeforewehave 
anyideaofhowtheoperationsshouldbedistributed inspaeandtime;thisleadstoanunneessarylossof fexibilityoftheparallelizationphaseand,hene,toa 
potentiallossofperformane. AÆnedependenes.Non­uniformdependenesareeasily integrated:afterspae­timemapping,atleastthe(al­waysfullypermutable)spaedimensionsmaybetiled. 
Ontheotherhand,itanbeshownthat,forgeneral aÆnedependenes(e.g.,broadasts),tilesmusthave unitextentinthetimedimensions. 
Preision.Spae­timemappinggivesusdiretaessto exeutiondatasuhas(virtual)proessornumberand exeutiontime,whiharenotavailablebeforehand. 
Hene,weanusemoreonreteostfuntionswhih takethesedataintoaount,e.g.,inordertominimize thenumberofommuniationstartups[4]. 
Thepriefortheseadvantagesisaninreasedompilation timeduetomoregeneralsheduling,alloation,andode generationtehniques.Theappliabilityisdeterminedby 
theinputonstraintsofthepolytopemodel(f.Setion3). 5. TILING SPACE AND TIME First,wedonotallowtilingtoarbitrarilymodify,butonly 
tooarsenagivenalloation,i.e.,iftwooperationsareal­loatedonthesamevirtualproessor,tilingmustalloate themonthesamephysialproessor.Hene,themappingof 
virtualtophysialproessorsmustbeindependentoftime, i.e.,thereareasmanypairsoftileboundariesorthogonal 
tothetimedimensionsastherearespaedimensions.Fur­thermore,oneanshowthattheommuniationostannot bereduedbyskewingtheremainingboundarydiretionsin 
spaeandtime,omparedtousingboundariesorthogonalto thespaedimensions.Thus,wemaytilespaeandtimedi­mensionsseparately.Notethatthisdeisionofkeepingthe 
alloatorresponsibleforthealloationisarestritionand, thus,mayleadusawayfromaglobaloptimum.Thisaspet isleftforfutureworkespeiallysineanadhosolutionis 
toapplytheexistingtilingtehniques(inludingtheiropti­malityresults)tothe(perfetlynested)spae­timemapped 
program,asalreadymentioned.Instead,weexploreinmore detailtheobtainedseparationoftilinginspaeandtime. 
Tilingspaedimensionsmeansoalesingasetofvirtual proessorstoonephysialproessor.Thispointistreated inmoredetailelsewhere[4]. 
Tilingtimedimensionsseemslessintuitiveatfrstglane. However,itmaybeneessaryiftheamountofworkper physialproessorandlogialtimestepistoosmall.Itan 
beshownthatthereisalwaysatmostonetimeloopthat limitstiling;ifitexists,allofitssurroundingtimeloops annotbetiled.Analgorithmthatidentifesthisloop(and 
themaximalallowedtilewidththereof,basedonasuÆient riterionfortilingtime)ispresentedelsewhere[6].Also 
somefrstexperimentalresultsontheimportaneoftiling timedimensionsanbefoundthere. 6. CONCLUSIONS AND FUTURE 
WORK Wehaveshownthattilingafterspae­timemappingextends theappliabilityofexistingtilingmethodsintheontextof 
loopparallelization. Furthermore,tilingspaedimensionsanbeperformedwith well­knowntehniquesorwithdediatedmethods[4].In 
mostases,tilingoftimedimensionsisappliable,andsome­timesevenneessarytoobtainreasonableperformane[6]. 
Futureworkwillhaveto .exploretheinterationofalloationandtilingmeth­ods; .dealwithloadbalaningaspets(inthepolytopemodel, 
proessornumber0hasoftenmoreworktodothanthe others); 7. ACKNOWLEDGMENTS IwouldliketothankChristianLengauer,NilsEllmenreih, 
PeterFaber,andMaxGeiglfortheirfruitfulommentson earlierversionsofthispaper,aswellasPaulFeautrierfor intensivedisussionsonthistopi.AlsothankstoSvenAn­ders,ArminGraoBlinger,AxelKrauth,andStefanShuster 
fortheirtehnialassistane.FinanialSupportwasgranted bytheDAADthroughPROCOPE. 8. REFERENCES [1]N.Ahmed,N.Mateev,andK.Pingali.Synthesizing 
transformationsforloalityenhanementof imperfetly­nestedloopnests.InConferene proeedingsofthe2000InternationalConfereneon 
Superomputing,2000.Toappear. [2]R.Andonov,S.Balev,S.Rajopadhye,andN.Yanev. Optimalsemi­obliquetiling.InThirteenthACM 
SymposiumonParallelAlgorithmsandArhitetures. ACMPress,July2001.Toappear. [3]P.Feautrier.Automatiparallelizationinthepolytope 
model.InG.­R.PerrinandA.Darte,editors,TheData ParallelProgrammingModel,LNCS1132,pages 79 103.Springer­Verlag,1996. 
[4]M.Griebl.Minimalnumberofommuniationstartups bytilingspae­timemappedprograms.Submitted. Preliminaryversionavailableathttp://www.fri.uni­ 
passau.de/l/papers/rinstart.htrl. [5]M.Griebl.TheMehanialParallelizationofLoop NestsContainingwhileLoops.PhDthesis,Fakultaatfaur 
MathematikundInformatik,UniversitaatPassau,Jan. 1997.TehnialReportMIP­9701. [6]M.Griebl.Onthemehanialtilingofspae­time 
mappedloopnests.TehnialReportMIP­0009, FakultaatfaurMathematikundInformatik,Universitaat Passau,Aug.2000. 
[7]F.IrigoinandR.Triolet.Supernodepartitioning.In Pro.15thAnn.ACMSymp.onPriniplesof ProgrammingLanguages(POPL'88),pages319 
329. IEEECS,Jan.1988. [8]C.Lengauer.Loopparallelizationinthepolytope model.InE.Best,editor,CONCUR'93,LNCS715, 
pages398 416.Springer­Verlag,1993. [9]Y.SongandZ.Li.Aompilerframeworkfortiling imperfetly­nestedloops.InL.CarterandJ.Ferrante, 
editors,LanguagesandCompilersforParallel Computing,12thInternationalWorkshop,LCPC'99, LNCS1863,pages185 
200.Springer­Verlag,1999.   
			