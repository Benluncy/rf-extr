
 A framework for the recursive de.nition of data structures Jean-Louis Giavitto LRI umr 8623 du CNRS, 
Universit´e de Paris-Sud F-91405 Orsay Cedex, France giavitto@lri.fr ABSTRACT Funtionallanguagesallowthedefnitionofafuntionby 
meansofreursiveequations.Thispaperdesribesagen­eralframeworktoextendthisapproahtodatastrutures. Ourmainobjetiveistoavoidpartialdefnitionsandthe 
lazyevaluationstrategy(asitistheaseinHaskell).Our frsttaskistodeveloptheoneptofdatastrutureand sub­strutureinageneralsetting.Thenweharaterize 
anevaluationstrategywhihpreservesthestrutureofthe datasetandwepresentasuÆientonditionforadefni­tiontobetotal(eahelementofthedatastruturehasa 
defnitevalue)andomputablebythisstrategy.Usingthe framework,wefullydevelopthespeialaseofvetors.In addition,weprovideanexpliitsyntationditiontohek 
ifareursivevetordefnitionistotalandomputablebya simpleiterativeloop. Keywords reursivedefnitionofdata­strutures,statianalysisofdela­rativelanguage,evaluationstrategy,vetorequations 
1. INTRODUCTION Thenotionoffuntionsupportedbythelanguagesofthe MLfamilyisoneofthemostpowerfulandeÆientthatan 
befoundamongsttheprogramminglanguages.Inouropin­ion,thissuessisduetothefatsthat: 1.funtionsinMLaredefnedinanequationalframework 
andreliesonawellfoundedmathematialstruture, extensivelystudied(A-expressions);and 2.propertiesanbeautomatiallyinferredfromdefni­tiontohekorretionandhelpimplementation(type 
infereneandevaluationstrategy). Point1)enablesthealgebraireasoningonprogramsand point2)linksthemathematialnotiontoitsomputerim­plementation.Ourideaistoextendthisapproahto"data 
struture"whilemaintainingthesetwopoints.Thisgoalis Permission to make digital or hard copies of all or 
part of this work for personal or classroom use is granted without fee provided that copies are not made 
or distributed for pro.t or commercial advantage and that copies bear this notice and the full citation 
on the .rst page. To copy otherwise, to republish, to post on servers or to redistribute to lists, requires 
prior speci.c permission and/or a fee. PPDP 00, Montreal, Canada. Copyright 2000 ACM 1-58113-265-4/00/0009 
..$5.00 alongtermresearhobjetive,andweskethhereonlya frstframework.However,thisapproahisfullydeveloped 
inthepartiularaseofvetors. Morepreisely,thispaperstudiesdefnitionsofdatastru­turesingeneralandarraysinpartiularbymeansofsetsof 
reursiveequations.Itdevelopsageneraltheoryofthose datastrutures,aswellasstatially­hekableriteriaguar­anteeingthattheequationshavetotally­defnedsolutions 
(i.e.no"bottom"omponentsintheresultingdatastru­ture)thatanbeomputedsequentially(i.e.withoutre­oursetolazyevaluation). 
Theapproahpresentedinthepaperappliestonon-alge­braidatastruturessuhasarrays,whilelassiresults fromdomaintheory,asimplementedinlazyfuntionallan­guages,fousonalgebraidatastruturesonly.Moreover, 
theapproahinthepaperofersmoreompile­timehek­ingandpossiblymoreeÆientompilationshemesthan lazyevaluationofreursivedefnitions. 
Intherestofthissetion,wepresentsomeproblemsraised bythereursivedefnitionofdatastruture,usinginfnite listandvetorasexamples. 
1.1 In.nite List and other Algebraic Data Type InCAML[14],itispossibletospeifyadatastruture throughareursiveequations.Forinstane: 
letrez1::z;; defnesaninfnitelistofones:1::1::1::Thisdefnition isnomorethantheexpressionintheCAMLsyntaxofthe 
equation z1::z (1) wherethesolutionzistobefoundamongstthesetof(fnite andinfnite)lists.However,amoresophistiateddefnition 
fails;theprogram: letnil()[];; letrez1::(nil());; printsatompilationtimehefollowingerrormessageonthe 
defnitionofz:"Thiskindofexpressionisnotallo­ wedinright­handsidesof"letre"".CAMLindeed doesnotallowreursivedefnitionofadatastrutureifthe 
righthand­side(r.h.s.)impliesafuntionappliationand evenifthereisno"realreursion"involved(herethefun­tionnilwhihtakesnoargumentandevaluatesin[]).Only 
onstrutorsanbeusedinther.h.s.ofareursivedata struturedefnition. Thiskindofdefnitionisallowedinalazyevaluationlan­guagelikeHaskell[9].Hereisanexampleofa"real"re­ursivedefnition: 
letinymap(funx­>x+1)y;; letreiota1::(iniota);; Thelistiotaisaninfnitelistsuhthatitsnthelementequals n.ThelazyevaluationstrategyofHaskellenablesthehan­dlingsuhdata­struture:forexample,theevaluationofthe 
expressionhd(tlz)returns2.However,onsiderthefollow­ingreursivelistdefnition: letrez1::tlz;;(2) Thistime,theprogram"loops":moreexatly,theevalu­ationoftheexpressionhd(tlz)whihissupposedtore­turntheseondelementinthelistraisesastakoverfow. 
Remarkthatalltheliststhatbeginwiththevalue1are formallysolutionsoftheequation(2). Listsarenottheonlydatastruturethatanbedefned 
byreursiveequationsinHaskell.Moregenerally,allalge­braidatatypeanbespeifedbythiskindofdefnitions. Equation(2)showsthat,withoutaution,reursivedef­initionofadatastruturemaydefnepartialobjets(i.e. 
datastruturewheresomeelementsareleftundefned)ex­atlylikethereursivedefnitionoffuntionsenablesthe speifationofpartialfuntions. 
However,opposedtothepointofviewtakenbyHaskell, wewanttoavoidpartialdatastrutures.Therefore,wemust determineatompilationtimedefnitionsleadingtopartial 
struturestorejetthem.Asamatteroffat,theusual oneptofdatastrutureimpliesthateahpartofthedata struturemustbewelldefned.Thesolutionadoptedby 
CAML,thatistosay:allowingonlyonstrutorsinr.h.s.of anequation,issuÆienttosatisfythisonstraintbutistoo 
rudeandrejetsmanyinterestingandharmlessdefnitions. 1.2 An Example of Recursive Vector De.ni­tion Thevetordatastrutureisfundamentallydiferentfrom 
thelistdatastruture.Forexample,thereisnodefnitionof avetorasanalgebraidatatype(withonstrutorlikethe ::forthelists).Nevertheless,itispossibletospeifyvetors 
bymeansofreursivedefnitions.Hereisanexample: iota [I0I]0([I1;1I]+iota:2)(3) Inthisequation,theonstants(literalvetors)arewritten 
bylistingtheirelementsbetween[IandI]asinCAML.The 0operatorrepresentstheonatenationofvetors,the+ standsforthepoint­wiseadditionandexpressionA:ntrun­atesvetorAtoitsnfrstelements.Theseoperationsare 
allpolymorphi(theyaeptvetorsofanylength).One mayhekthatV[I0;1;2I]isasolutionofthisequation beauseV:2[I0;1I],so[I1;1I]+(V:2)[I1;2I] 
andthen[I0I]0([I1;1I]+(V:2))[I0;1;2I]V. How to Compute the Solution of a Recursive Vector De.nition?. 
Equation(3)anbetranslatedinanequiv­alentsystemofequationsdefningtheelementsofiota.If weassumethatthelengthofthesolutionis3,weanwrite 
(vetorindexingbeginswith1): iota[Iiotal;iota2;iota3I] byevaluatingthetrunationinther.h.s.of(3),weobtain: 
[Iiotal;iota2;iota3I] [I0I] 0([I1;1I]+[Iiotal;iota2I]) whihanberewrittenin: iotal 0 iota2 1+iotal { iota3 
1+iota2 Theequationsofthissystemarebetweenvetorelements andarenotreursive.So,thislastsystemanbesolvedby 
aseriesofsubstitutions.Notethatthissituationissimilar tothereursivedefnitionofafuntion.Forexamplethe 
standarddefnitionoffat(resp.iota)isreursivebutthe omputationoffat(n)(resp.theomputationofthevalue ofanelementofthevetoriota)doesn'tloop. 
Thequestionisnow:whatanbetheshedulingofthese substitutions?Itanbeheked,forthedefnitionofiota, thattheequationthatdefneselementidependsonlyon 
theelement(i-1)fori1;andthefrstelementdepends uponnootherelement.Thesystemanthenbesolvedby omputingther.h.s.oftheelement'sequationintheorder 
oftheindies,andbysubstitutingintheremainingequation thevaluejustomputed.Theomputationofiotaisthen naturallytranslatedintothefollowingimperativeiteration 
loop(inCwherevetorindexingstartsat0): iota[O]=O; for(i=1;i<3;i++) iota[i]=1+iota[i­1]; Notethatinthisloop,anelementisaessedonlywhenis 
hasalreadyawelldefnedvalue. Heretoo,ourapproahisdiferentfromHaskell'sap­proah:ourevaluationstrategyisnotlazyandwewantbe­forestartingtheomputation,toinferaompletesheduling 
ofallthesubomputationneededtosolvetheequation. Moreover,wedonotadmitanykindofshedulingbutonly thosethatareompliantwiththe"topologial"strutureof 
thedefneddatastruture.Forinstane,intheomputation ofiota,alltheauxiliaryresultsarevetors.Thisisnot alwaysthease,seeforinstaneequation(4)insetion3.5 
belowforaounterexample. Thisassumptionisastrongonstraintbutisjustifedina frameworkwerewerequiretodefnetotaldatastruture.It 
enablesasimpleandeÆientshedulingoftheomputations andeasesthehekingthatthesolutioniswelldefned.In addition,thisonstraintanbethoughtasexpliitingsome 
"primitivereursionsheme"linkedtothedatastruture. Additionally,tosolveequation(3),wemustdetermine thelengthofthesolution,whihanbeseenasatypein­fereneprobleml.Theinfereneofthetypeofthesolution 
oftheequation(1)isaproblemsolvedforalgebraidata types.However,thevetorexampleshowsthatdatastru­turesgenerallyrequiresarihertypestruture. 
lThetypeinCAMLdoesnotinludethelengthofthe vetorvetor.Thismakestheprogrammerabletoonstruttrian­gularstruture(asavetorofvetorsofunequallength)but 
disallowsthehekingatompiletimethatarrayonatena­tioniswelldefned:a0a'iswelldefnedonlyifarrayaand a'havethesamenumberofelementsalongthedimension 
usedfortheonatenation. 1.3 Organization of the paper Therestofthispaperisorganizedasfollows:insetion2 
ageneralframeworkisdesribedfortheformalizationof reursivedefnitionsofdatastruturesandtheirresolution. 
Setion3presentsaninstaneofthisformalframeworkfor theaseofvetors.Setion4skethestheimplementation ofthepreviousoneptsinMathematia.Finally,wereview 
relatedworksandopenquestionsraisedbyourwork.  2. FORMALIZATION 2.1 Data Type and Data Structure Thefundamentaloneptofdata-strutureisubiquitous 
inomputersieneaswellasinallbranhesofmathemat­is.Consequently,itsharaterizationisnoteasy.Some approahesemphasizeontheonstrutionofmoresophisti­ateddata­struturesfrombasiones(e.g.domaintheory); 
otherapproahesfousontheoperationsallowedondata strutures(e.g.algebraispeifation). Werelyuponthefollowingintuitivemeaningofadata 
struture:adatastruturesisanorganizationoranar­rangement0performedonadatasetVofvalues.Itis ustomarytoonsiderthepairs(0,V)andtosaythat 
sisastruture0ofV:forinstanealistofint,anvetor of5elementsfoat,et. Atraditionalapproahonsistsinworkingwiththesepairs 
intheframeworkofaxiomatisettheory.Forexample,the set9ofsimplediretedgraphs(diretedgraphswithout g multipleedges)anbedefnedby:9(0,V):0. 
 VxVwhereVisthesetofverties.Thisapproahon­siderequallythestruture0andthesetVanddoesnot stressthestruture0asasetofplaesorpositions,inde­pendentlyoftheiroupationbyelementsofV. 
Thisisthepointofviewthatwetake.Inthisapproah, adatatypeisapair(0,V)andadatastruturesoftype (0,V)isatriple(f,0,V)wherefisatotalfuntionfrom 
some0E0toV,thatis:fE0 . HV ThesetVplaysthesameroleasbefore:itistheset ofvaluesthatanbe"stored"inthedatastruture.The 
set0isthesetororganization(oftype(0,V)).Adata struturesoftype(0,V)isalabelingofthepositionofone organization0of0,i.e.avaluef(o)fromVisassoiated 
toeahpositionoin0. 2.2 Sub-structure of a Data Structure Thesetoforganizations0omeswithsomestruture: 
often,adatatypeinduesanaturalnotionofsub­struture inthedatastruture,justbyforgettingsomeelementsto reoveradatastrutureofthesametype.Herearethree 
examples: l ' allsuÆxesofl. 1.Alistla::l ' embeedsthesublistandreursively, 2.Atreeownsitssubtrees(thesonsoftheroot). 
3.Avetorsoflengthnrepresentsalsoallvetorsof lengthmwithm:nbuildbyforgettingthelast(n­m)elementsofs. Thefrstandseondexampleshowsthatthenotionofsub­strutureanbedefnedfromthereursivespeifationof 
analgebraidatatype.Thethirdoneshowsthatthisnotion anbegeneralizedtootherkindofdatatype. Wewanttoderivethenotionof"primitivereursion"from 
thisnotionofsub­struture:areursivedefnitionis"prim­itive"iftheomputationofthesolutionstrutureinvolves 
onlythevalueofthesub­strutures. Weformalizethenotionofsub­struturebyonsideringa partialorder.oon0(thesetsinindieswillbedropped 
whenevertheyanbereoveredbytheontext).Werequire (0,.)tobeawellfoundeddomain(hereadomainisan algebraipo,f.[8])toensuretheorretionofindutive 
defnitionsin0.Theminimalelementof0isdenotedby .o.If0.0' ,thenthepositionsof0anbeonsidered aspositionof0' 
.Therefore,foreah0.0' ,thereexists aninjetionjo from0to0' .Fortehnialreason,we >o.requiretheexisteneofamaximalelementin0:To.This 
elementmustbeadomain.Theseonsiderationsleadusto thedefnition: Defnition1.Adatatypeisapair(0,V)whereVisa 
setofvaluesand0awellfoundeddomainwithamaximal elementTosuhthatToisadomainandforeah0,0 ' in 0,0.0' ,thereexistsaninjetionjo 
>o..Byonvention, j(0)denotes (0). jo>T Adatastruturesoftype(0,V)isatotalfuntionfrom a0E0toV.0isalledtheorganizationofs.The 
elementsof0arealledthepositionsoff.Ifsands ' are twodatastrutureswiththesamedatatypeandrespetive organization0and0' 
suhthat0.0' ,andifss ' Æ jo o.,thenwesaythatsisasub­strutureofs ' . > Example of the Binary Trees. InCAMLthedatatypeor­respondingtoalabeledbinarytreemaybe:type'aB= 
Leafof'aINodeof'a*('aB)*('aB). Forourgoal,theorrespondingdatatypeanbeBc (0,0)where0isthetypeofthelabels.Anelement0E0 
isafnitesubsetofn{l,r}*thatsatisfythefollowing assumptions: 1.ifww ' E0thenwE0; 2.ifwlE0thenwrE0; 3.ifwrE0thenwlE0. 
Apositionisaword,theletterlrepresentstheseletionof theleftsonandthelettertheright­sub­tree.Theempty rwordisrepresentedbyA. 
Forinstane,thebinarytreedesribedinCAMLbythe termNode(5,Leaf6,Node(7,Leaf8,Leaf9))or­ g respondstotheorganization0BA,l,r,rl,rrandis 
desribedbythefuntion B{A H5,l H6,r H7,rl H8,rr H9} Weaddtotheset0theelementntorepresentsthemax­imalelementTo.Thesetnisnotfnitesoitisnotonsid­eredasavalidorganisationforadatastruture.Itisjust 
usedasanauxilliarysetwheretheomputationours(Cf. nextsetion). Therelation.owhihorrespondstothisnotionofbi­narytreeisthesuÆxrelationdefnedby0.o0' 
ifthereis aw ' E0' suhthatw '0c0' .Forexample,thebinarytree C{A H7,l H8,r H9}isasub­strutureofBbeause 
itanberootedatpositionrinB:C(w)B(rw). Severalinjetionsjo o.maybedefneddefnedby: > jo o.(www >) ' 5 0 
6 7  89 Figure1:Thebinarytree forsomew ' .Asamatteroffat,itmayexistszeroor moreinjetionsbetween0anddependingontheexis­ 
0 ' teneofw ' .However,weonsiderespeiallythefuntion jjo>(Ax xbetweenanyorganisation0andthetop organisation. 
Figure1illustratesthesesonstrutions.Bewarethat otherformalizationsofthebinarytreedata­strutureare possible.Werelyontheorderoandthefuntionsjto 
speifyaspeifnotionofsub­strutureinbinarytreesand weadmitonlyfnitebinarytrees.  2.3 Recursive De.nitions 
Forthesakeofsimpliity,werestritourselvestopro­gramsPrestritedtoonlyoneequation(however,theresults presentedhereanbeextendedtosystemsofequations). 
AreursivedefnitionisanequationofformX'p(X) whereXbelongstoadatastrutureoftype(0p,Vp).To ensuretheexisteneofasolution,andtohooseonepar­tiularsolutionwhenseveralsolutionexists,wefousona 
slightlydiferentproblem:fndingthesolutiononthelarger setTp ToHVJofthepartialfuntionfromTotoVJ. Thefollowingnotationsandresultsarestandardindo­maintheory,f.[8].IfVisaset,thenVJisthefatdomain 
buildonVbyadjoiningtheminimalelement..ThesetTp isadomainwiththeSottorder1.defnedby:f1.9if f(x)v.9(x)forallxinTo.Thefuntion'isfromTp 
toitself.Ifweassumethat'isaontinuousfuntion,then thereisaleastxsuhthatx'(x).Thisxisalledthe leastfxedpointof',writtenfix'porequallyfixP.Itis 
 givenby'n). n(.1.TheelementfixPisthesolutionofPandanbethought ofasa"partialdatastruture".Asamatteroffat,a 
partialfuntionfinTdefnesauniquepartialfuntion fofÆjo>Ton0.Inthefollowing,wewritesometimes finsteadoffo. 
Example of Recursive De.nitions of Binary Trees. A programmQdefningabinarytreesisspeifedbyadefni­tion 
Q:X'Q(X) where'QisafuntionfromTQ nHVJintoitself. Hereisanexample.LetIwIthelengthofthewordwEn andonsiderthefollowingdefnitionfor'Q: 
{'Q(X)(A)0 'Q(X)(wx)1+X(w)ifIwxI:2 {{ 'Q(X)(w).ifIwI2 ThenQdefnesabalanedbinarytreeofheight2whereeah 
nodeislabeledbyitsheight:fixQ{AH0,lH1,H r 1,llH2,lrH2,rlH2,rrH2}. . o '  strutureandsub-struture 2.4 
Maximal Programs Atthispoint,ourproblemistodetermineiffixPisindeed adatastruture,thatis,ifitisatotalfuntiononsome 
0E0p. IffisafuntionfromdomainDintoE,thenDef(f) denotesthedefnitiondomainoff,i.e.:Def(f){dE D:d .D1f(d) 
.E}.Thefuntionfissaidtotalif Def(f)D-{.D}. Defnition2.LetP:X'p(X)beareursivedefnition ofadatastrutureofdatatype(0,V).TpdenotesToH 
VJ.Thefuntion'pisaontinuousfuntionfromTpinto itself. WesaythatPismaximalifthereisa0E0suhthat j(0)Def(fix'p).IfPismaximal,wesaythatPdefnes 
thedatastrutures(fix'p)Æjo>T. Theuseoftheadjetif"maximal"isjustifedbythefol­lowingfat.IfPismaximalthenbywritingffixPand 
with0suhthatj(0)Def(fixP),onemayseethatfois amaximalelementamongstthepartialfuntions0HVJ fortheSottorder. 
Example of Maximal and Non-Maximal Programs on Binary Trees. TheprogramQgivenaboveisanexampleof amaximalprogram.Wehave 
Def(fixQ){A,l,r,ll,lr,rl,rr} Thissetorrespondsdiretlytoanorganisation0Q(the funtionsjaretheidentityinjetionsbetweentheorgan­isationsandn).ThenQismaximalanddefnesthedata­strutureswithorganisation0Q. 
Nowwegivetwoexamplesofnon­maximalprograms. ConsidertheprogramRldefnedby:Rl:X'Rl(X), where: 'Rl(X)(A)0 
'Rl(X)(wx)1+X(w) ThenDef('Rl)nwhihisnotanorganisation(reallthat weadmitonlyfnitesubsetsofnasorganisations;thesetn 
isjustaddedto0tohaveatopelementandisnotonsid­eredasavalidorganisation). TheprogramR2speifedthroughthefuntion'R2: 
 'R2(X)(A)0 'R2(X)(wr)1+X(w)IwI<2 isnotmaximal.Indeed,fixR2{AH0,rH1,rH2} r andthenDef(fixR2){A,r,r}whihisnotanorgani­ 
r sation(thissetdoesnotsatifyondition3inthedefnition ofanorganisation). 2.5 Inferring the Organization 
of the Least So­lution TohekifDef(fixP)isadatastruture,wewanttoinfer an0fromaPandprovethatfixPismaximalonthis0. 
Generally,anelement0of0doesnotrepresentastan­dardtypebutismorepreise:itistheset0whihor­respondstoanMLtype.However,wehandletheelements 
of0as(non­standard)typesandwewanttoinferforany programPanorganization0psuhthat:fixPIi(o.)fixP (thenotationfIE.denotestherestritionoffuntionfon 
EtoE). E ' WeassumethatforanyprogramP,thereisanassoiated setofequationsP thatrepresentstypeonstraints.The 
solutionsofP havetobefoundamongsttheelementsof 0.WesaythatPtypeheksiffixP existsandwesay thatthetypeinfereneissoundifforeveryprogramQ, 
Def(fixQ)j(fixPQ).Inthesequel,weassumethatthe typeinfereneissound. Notethatiftypeinfereneissoundandany0Tois 
fnite,thentheproblemofhekingifaprogramismaximal istheoretiallysolved:wehavejusttoomputethesolu­tionofPonthefnitesetfixP 
insteadofTousingalazy evaluationstrategy.IftheomputationoffixP(o)loopsor requirestheomputationoffixPonao 
' outsidej(fixP ), thenfixPisnotdefnedono.Soitispossibletoompute expliitlyDef(s)andtohekifPismaximal.Forinstane, 
itispossibletodevelopthisapproahforthevetordata struturepresentedinsetion3. However,thisapproahisnotsatisfatorybeause 
thedomainfixP anbearbitrarybig;  seondly,thismethodessentiallyomputesthedata strutureandannotbeonsideredasaompile­time 
hek;  fnally,thismethoddoesnotdetermineasimpleshed­ulingoftheomputationsneededtosolvetheprogram: adatastrutureishandledlikeanordinaryfuntion 
onafnitedomain.  Inonsequene,wedevelopanotherapproah. 2.6 Pre.x-Computable Programs Atthispointwewant: 
tohekiffixPismaximalontheorganisationfixP ;  andalsotoinferasimpleshedulingoftheomputa­tionsneededtosolvethefxpointequation. 
 Wehavetopreisethenotionof"simple"sheduling. 'n WeknowhowtoomputefixP:justompute(.). pBeausethetargetdomainVpoftheelementsofTpisafat 
domain,ifapositionohasadefnitevaluefor(.),then 'n p itisalsotheasefor';(.)ifm.n.Thuswedon'tneed p toomputeagain';p(.)(o)onewehaveadefnitevalue 
foro.Soweanompute'pt(.)byomputingatsteptonly thevaluesassoiatedtothepositionsinthesetÆt: tt-l ÆtDef('(.))-Def('(.)) 
pp Seefgure2. Ourproblemistoharaterizeinasimplewaythesets Ætwhihwouldmakeusabletosheduletheomputation 
 ( )Æ ( ) Figure2:Growthofthedefnitiondomainbetween twoiterationintheomputationoffix'.The squarerepresentsTandthegrayareainthesquare 
represententsrespetivelyDef('t(.)),Def('t+l(.)) andthediferenebetweenthistwosets. ofthevaluesofoinfixP 
.ThisplanisusuallytoodiÆult toahieve:the"shape"ofthedefnitiondomainof't(.)is p usuallytoomplex(f.fgure2). 
Ourmainideaistotrytoharaterizeafamilyofpro­gramsforwhihwean"forget"somepositionsofthedef­initiondomainof'tp(.),withouthangingthefnalresult. 
Byforgettingsomepartofthedefnitiondomainateahit­eration,wemayonstrainthedefnitiondomaintoasimpler shape,ompliantwiththenotionofsub­struturearriedby 
thedatatype. Toahievethisgoal,wehavetointroduetheoneptof prefx(seefgure3). Defnition3.LetEbeasubsetofTo.TheprefxesofE 
aretheelementsof{0E0:j(0)E}.Wewanttopik­upapartiularelement,soweassumetheexisteneofatotal ordering:onTothatextendso,i.e.:00 
' =j(0): j(0 ' ).WedefneLEmax-{j(0):0E01j(0)E}. ThesetLEisassubsetofTo. IffET,wewriteLfforLDef(f)and.fdenotesfIL/. 
WewriteLf o fortheset0E0suhthatj(0)Lf. C...(f) .f f . T Figure3:Prefxofafuntionf. Wearenowabletodefneanotionofsimplesheduling 
bytheformalnotionofprefx­omputableprogram. Defnition4.AprogramP:X'(X)isprefx-omputable iffix'fix(.Æ'). 
Intuitively,ifaprogramisprefx­omputable,thenthe omputationofthefxpointof'anbedonebyrequiring onlytheomputationofthesub­struturesofthesolutions 
orrespondingtotheprefxoftheiterates(f.fgure4). Example(4)insetion3.5showsthatthepropertyofbe­ingmaximalandbeingprefx­omputablearenotthesame: 
thereareprogramsthataremaximalbutthatarenotprefx­omputable. 2.7 De.nition Domain Growing and Pre.x­computability 
Noww ewanttolinkthepropertyofbeingprefx­ompu­whereN+N-{0}.ThesetVisorderedbyinlusions: table to the growth 
of the defnition domain b e t ween the two iterates 't(.) a n d 't+l(.)(seefgure4).  TisequaltoonV.ThisrelationisatotalorderonV 
andthen:too.Thefuntionsjo>oaresimplythe . N+ identity.ThemaximalelementTTistheset(remark N+ thatitanbebbuildastheunionof0E0,0). 
Intuitively,avetorisatotalfuntionfrom{1,,n} intoV.Avetorsisasub­vetorofs ' ifsisobtainedfrom s ' bydroppingfnalelements.ThedomainTT(ofpartial 
 T funtionsfromTTintoVJ)isthesetof"partialvetors" withelementsvalueinV.  3.2 Vector Expressions and 
Vector Programs (. ) Avetorexpressionisdefnedbythefollowinggrammar: EXP :: [Ivl;;vpI] f(el,,ep) e+p 
e:p el0pe2 id Figure4:Prefxoftheiteratesof'('nabbreviates 'n (.)). Defnition5.AprogramP:X'(X)isD-growing, 
withDaontinuousfuntionfrom0intoitself,ifVYE T,j(D(LY o)).L'(Y). 0isadomainandDisontinuous.ThenfixDexists.An 
importantresultjustifestheintrodutionofthisdefnition: THEOREM1.AprogramP:X'(X)thattypeheks ismaximalandprefx-omputableifthereisafuntionD 
suhthatPisD-growingandfixP fixD.Inthisase, wesaythatPisD-progressive. Thedemonstrationisrelativelyeasy:itonsistsinshow­ingthat: 
Def(fixP)j(fixP )j(fixD) Def(fix(.Æ' p))Def(fixP) 3. THE RECURSIVE DEFINITION OF VECTORS Theprevioussetionhasskethedageneralframework 
forthereursivedefnitionofdatastrutures.Foragiven programP,weneednowtoexhibitafuntionDpsuhthat PwouldbeDp­progressive. 
Inthissetion,wepursueourworkalongthispath,for thespeialaseofvetors.Inthefrstpartofthispaper,we havedealtonlywithmeanings.Weturnnowourattention 
alsotoexpressions. OurideaistotranslatetheprogramexpressionPtothe . . wherepEN+ ,idEVARasetofidentifers,viEV,e,eiE 
EXPandfEFasetofstritfuntionsfromVnintoV. Intuitively,onstrution[I;I]enablestheexten­sionalspeifationofavetor(bylistingitselements),on­strutionf(el,,ep)orrespondstothe(impliit)vetor 
point­wiseextensionofasalarfuntion,onstrutione+pis reminisentofFortran'seoshift,onstrutione:pisthe trunationofvetoretoitspfrstelementsand0pisthe 
onatenationofvetors. Interpretation of vector Operations. Theoperatorsofa termofEXPareinterpretedonTTinthefollowingmanner: 
1.[Ivl;;vpI]Aoswith(o) ase1:vl;;asep:vp;default:. 2.f(el,,ep)Ao f(el(o),ep(o)) 3.e+pAo e(o+p) 4.e:p(Ao 
e)Ibl,...,p} 5.el0pe2Aoifo:pthenel(o)elsee2(o-p) Note on the Vector Concatenation. Theparameterpin thevetoronatenationisthenumberofelementstaken 
fromthefrstargument. Thisspeifationoftheonatenationmayseemsunsatis­fatorybeauseonemustexpliitthepparameter.However, 
thefuntion speifedby: f 9 AXifX:maxDef(f) thenf(X) else 9(X-maxDef(f)) expressionofafuntion' p .Thefuntion' 
p builtissuh . . thatPis' p­growingbutnotneessarily' p­progressive.We(whihmayappearmorenatural),isnotaontinuousfun­ 
 . thenproposeasyntationditionontheexpressionof' p . tion. Forinstane,withx.,y[I1I]andx ' [I666I],thatgivesasuÆientonditionforPbeing' 
p­progressive. wehavexx ' butx y[I1I][I666,1I]x ' y 3.1 Semantic domains whihshowsthat isnotmonotoneandthereforenoton­tinuous. 
Thetype(V,V)representsthetypeofourvetorsofele­However,byonvention,wemayassumethatu0visanmentsofV.ThesetVisspeifedby: 
 + abbreviationofu0puvwherepuisthelengthofuinferred 0,{1},{1,2},,{1,,n},,N g bythesystempresentedinsetion3.3. 
Semantics of a Program. AprogramPonvetorsisapair x.ewherexisanidentiferandeisavetorexpression wheretheonlyidentiferthatmayappearisx.Thispairis 
interpretedhasanequationX' p(X)tobesolvedinTT with' p Ax e. LEMMA1.IfPisaprogramonvetors,then' pisaon­tinuousfuntion.Thereforefix' 
pexistsandanbeom­putedas n 'n(.). p  3.3 Vector Type Inference Theset{1,,n}anbeodedbytheintegernandthe 
emptysetby0.Then,anumbernENanbeusedtorepre­sentsanelementofV:thisnumberrepresentsthelengthof avetor.Thisrepresentationofthedefnitiondomainofa 
vetorsimplifesthepresentationofthesystemP assoiated toavetorprogramP. TheideatobuildP isthefollowing.Toeahidentifer 
' xweassoiateavariablenandtoeahsub­expressione thatappearsinther.h.s.ofanequationofP,weassoiate e avariablen.Thesevariablesaretypevariablesandthe 
valuetheytakearethetypeoftheassoiatedexpressionin ' P.Informally,thevalueofninthesolutionfixP willbe 
thelengthofthevalueofxinfixP. Defnition6.ThesetofequationsP L(P)isbuiltby inspetingPandbyaddingnewequationsforeahsub­expression.AnequationofP 
takesthefollowingform: e n=L(e) ThefuntionLisdefnedbyindutiononthestrutureofP: g L(P)L(x.e):(x.e)EP g 
'e L(x.e)n=nUL(e) L(x)0 g [lvl;...;vpll L([Ivl;;vpI])n=p L(f(el,,ep))L(ei)U l:i:p g /(el,...,ep)ei n=n:1:i:p 
g L(e+p)n e p=n e -pUL(e) ge:l L(e:l)n=lUL(e) L(el0pe2)L(el)UL(e2)U g elOpe2e2 n=p+n Notethat: L(P)isasetofequation,notasystem(thatis,several 
equationmayhavethesamelefthand­side).  TheequationsinL(P)arealllinearequations(andthe oeÆientsofthematrixofthelinearfuntionareall 
0or1).ItexistsveryeÆientalgorithmstodetermine ifthiskindofequationssetadmitszero,oneorseveral solutionsoverZdandtoprodueonesolution,seefor 
example[7,3].  Defnition7.AprogramPtypeheksifL(P)hasaunique solutionthatsatisfesthefollowingonstraints: 
e foreverysub­expressioneofP,thenumbersntakea stritlypositivevalue; e foreverysub­expressione:pofP,wehavenp; 
el foreverysub­expressionel0pe2ofP,wehavenp. IfP:x.e ' typeheks,n .denotesthevalueofvariable e nintheuniquesolutionofL(P)andfixP 
denotestheset {1,,n .}. Thefollowingresultstatestheorretionofthistypesystem: LEMMA2.Typehekingissound:ifP:x.etype­heks,thenDef(fix')fixP 
. ItmeansthatthedefnedvaluesofPlieinthesetspeifed byinfixP .Atthispoint,weannotensuremore.For instane,theprogram: 
u.u:3 typeheksandgivesn .3.However,thesolutionuisthe funtioneverywhereundefned.  3.4 Growth Function 
of a Vector Program . Wewillinferaspeiffuntion' p foreahvetorprogram P,whihwouldbealledtheprogressionofP. 
Defnition8.IfprogramP:x.etypeheks,weonsider . .. . theequationP:x . ewherextakesitsvalueinNand . . ePr(e).Wewrite' 
p thefuntionfromNtoNspeifedby . .. ' p Axe.ThePrtransformationisdefnedbyindution onvetor­expression: 
g . Pr(P)x . Pr(e):(x.e)EP . Pr(x)x Pr([Ivl;;vpI])p Pr(e+p)max(0,Pr(e)-p) Pr(e:p)min(p,Pr(e)) g Pr(f(el,,ep))minPr(ei):1:i:p 
Pr(el0pe2)Pr(el)0Pr(e2) p wherethefuntion0pisdefnedby: q0q' ifq<pthenqelsep+q' p LEMMA3.Thethreefollowingresultsaretrue: 
. 1.IfprogramPtypeheks,thenfuntion' p ismonotone. . 2.IfprogramPtypeheks,thenPis' p-growing. . 3.IfprogramPtypeheks,thenfuntion' 
p hasfixP as afxedpoint(itisnotneessarilyitsleastfxedpoint). 3.5 Example of a Program Maximal but not 
Pre.x-computable Consider R: x.[I1I]0lx+302[I2I]03x:4(4) Thisprogramtypeheksandwehaven .4.Thesolution 
 programisprefx­omputablebutitisonlyafteriteration . . mthatytakesanon.value.However,hekingthat' 0 isgrowingonfixP 
isrelativelyeasyforsystemsreduedto onlyoneequation.   1 1 . . . . . isprogressiveifprog(0,0,x)0.Thefuntionprogis 
. Figure5:Buildingoftheexample(4)speifedbyindutionontheexpressionsThedefnition e. isgiveninfgure6. 
fixRanbeomputedbyafxpointiterationof' R:THEOREM2.Aprogressiveprogramismaximalandprefx­omputable. 'l(.)[I1;.;2;.I] 
Thistheoremisoneoftheahievementsofourwork.For '2(.)[I1;.;2;1I] . . instane,prog(0,0,x)fortheprogramRevaluatesin-2. 
3 ' (.)[I1;1;2;1I] . Sotheprogram(4)isnotaeptedas' R­progressive(and, Weanalsoomputethefxpointof.Æ': 
(.Æ')l(.)[I1;.;.;.I] (.Æ')2(.)[I1;.;.;.I] (.Æ')3(.)[I1;.;.;.I] Therefor,Risnotprefx­omputablebeausefix'and 
fix(.Æ')difer.However,Rismaximalbeause Def(fix')fixP {1,,4}EV indeed,itisnotprefx­omputable). 4. IMPLEMENTATION 
Theoneptsandtoolsdevelopedabovehavebeengen­eralizedandimplementedinaMathematianotebook.This notebookaswellastheformalproofsoftheresultsstated 
inthispaperaredownloadableatwwwLlriLfrr giavittor DefReLhtml.Anexampleofamathematiasession(hek­ingtheprogressionofsomeprograms)isgiveninfgure7. 
Withinthisnotebook,itispossibleto . Thefuntion' Rofprogram(4)isspeifedbyequation: speifyasystemofvetorequationsP:X'(X); 
. . . . . x' R(x)min(4,(ifA<3thenAelse3+x)) whereA=ifB<2thenBelse3 inferthetypeofeahsub­expressioninthesystem; 
. andB=1+max(0,x-3) omputefix'(byfxpointiteration); . . (afterfewsimplifations).Theiteratesof' Rare:' 
R(0)1 omputetheiteratesof.',thatis(.Æ')n(.)and 2 . . . and ' (0)' R(1)1.Notethat ' R 1<fixP but fix fix(.Æ'); 
R . . ' R(4)4.WehavefixP fxpointofP(althoughitisnot . . buildthefuntion'andtoomputefix'; theleastone). 
. hekbyomputingprogifPis'­progressive;  3.6 Progressive Program Todetermineifaprogramismaximalandprefx­ompu­ 
generateanimperativeodewhihomputestheve­table,thetheorem1saysthatitissuÆienttohekthattorsolutionsbyafxedseriesofimperativeloops. 
. fix'fixP . p Thelastpointorrespondstoourtargetgoalof"ompil­ Thispropertyanbehekedsimplybyomputingthe 
ing"reursivevetordefnitioninastatiC­likeode.Here . n iterates ' (0).Ifafxedpointq:fixP isfound,weknow 
p "stati"means:withoutusingthestak,mallonorreur­ sivefuntions.Roughlyspeaking,ifaprogramisprogres­ . 
thatPisnot'­progressive.Ontheotherhand,wefnally reahaqsuhthatqfixP andweknowthenthatthe sive,thenthesolutionsanbeomputedbyaloopthat 
enumeratesthevetorelementsinaninreasingorder.  5. DISCUSSIONS programismaximalandprefx­omputable. 
However,theomputationoftheiteratesantakealong timeasshownbythefollowingexample x.([I1I]0lx):m 5.1 Summary 
wheremisanarbitraryparameter.Theassoiatedfuntion . min(m,n+1)takesmsteptoonverge.Wehaveproposedaformalframeworktodefnedatastru­ 
'An . turesingeneralandarraysinpartiularbymeansofsetsofWewanttodeterminediretlyiffix' p fixP without 
 omputingtheiterates.Thisisnotobviousinthegeneralreursiveequations.Ourproposaldepartfromthestandard aseofasystemwithseveralequationsbeauseifaprogramapproahbythefollowingpoints: 
. . Pis'­growing,thisdoesnotimplythat'(q)q.The 1.Theoneptofdatastrutureweuseisnotrestrited example: 
toalgebraidatatypes; x' l(x,y)([I0I]0lx):2*m 2.theformalismusedtohandledatastrutureemphases (5) y' 
2(x,y)y+; theoneptofsub­strutureofadata­struture; illustratethisfat.Oneanhekthat' 2(.,.).(for3.opposedtofuntions,adatastruturemustbea"om­anym)andthereforethisprogramdoesnotadmitafuntionplete"(or"total")objetandmustbeomputedbya 
. 'whoseomponentsarestritlymonotone.Notethatthissimpleshedulingstrategy. prog(S,q,. x) if( . xES)thenqelseprog(SU 
{ . x},q,e )whereesuh th a t ( . x . . e)E . P prog(S,q,p) p prog(S,q,max(0, . e-p)) prog(S,q-p, . e) 
prog(S,q,min( . el,, . ep))prog(S,q,. el0 p . e2) mingprog(S,q,. el),,prog(S,q,. ep) min(prog(S,q,. el),prog(S,max(p,p+q), 
. e2)) . Figure6:Defnitionofthefuntionprog.ThisdefnitionisalsovalidinthemoregeneralaseofasetPof equations. 
Thelastonditionmatters:itensuresforinstanethatthe omplexityoftheaessestotheelementofadatastruture arewelldefned[17]. 
Inthisframework,wehaveexpressedsomeonditionsthat enablethattheomputationofadatastruturespeifed byanequationanbeahievedomplyingwiththesub­struturing. 
Ifwerestrittoalgebraidata­type,(wehaveskethed apossibleapproahofofbinarytreesinsetion2.2)the evaluationstrategyislessrestritivethantheCAMLonebut 
avoidthefreenessofHaskell.Thegainisthatwean avoidthelazyevaluationstrategy:theshedulingofallthe omputationisstatiallyknownandthememoryresoures 
anbeantiipated.Thus,thetehniswehavedeveloped anbeintegratedasanoptimizationtoolsinafuntional languageompiler. 
Wehavealsoillustratedourtehnisontheaseofvetors whiharenotanalgebraidatatype.Wehaveonsidered anotionofsub­vetororrespondingtothevetortruna­tion.Andwehavedevelopedatypesystemtoinferavetor 
typethatinludesthenumberofelements(inthereferenes, theapproahisextendedtofullarray,withtheinfereneof 
thedimensionandthenumberofelementineahdimen­sion).Thetehnisdeveloppedhereinvolveombiningre­sultsfromdomaintheoryanddeisionproedureforsolving 
linearequationsonintegers.Theymayhaveinterestingap­pliationsinthedomainofprogramverifation(whenwe wanttoprovethatfuntionsaretotal). 
Itisimportanttonotiethatthereursivedefnitionof vetorarenotreallyallowedinHaskellbeausetheinten­sionaldefnitionofavetorusesthefollowingtrik.The 
funtionarraywhihenablethebuildingofanarraytakes asargumentanassoiationlistthatdesribesthevalueof eahindexofthearray.Sothereursivedefnitionofan 
arrayreallybeginsbythereursivedefnitionofalistand thenproeedwithanonreursivearrayreation.  5.2 Related 
Work Fousingonstruturesasasetofpositionsorplaes,in­dependentlyoftheiroupationbyvaluesisthemainpoint ofviewofthespeiesofstruturestheory[1].Motivated 
bythedevelopmentofenumerationtehniquesforlabeled strutures,theemphasisisputonthetransportofstru­turesalongbijetionsinaategorialsettings:twoisomor­phistruturesanbeonsideredasidentialifthenatureof 
theelementsoftheirunderlyingsetsisignored.Thiswork haslargelyinspiratedthepresentationofsetion2.1. Consideringadatastrutureindependentlyofitsunderly­ingsetisinterestingforotherspurposesthanombinatorial 
enumeration. Forinstane,in[10],B.Jaydevelopsaoneptofshape polymorphism.Inhispointofview,adatastrutureisalsoa 
pair(shape,setofdata).Asabove,theshapedesribesthe organizationofthedatastrutureandthesetofdatade­sribestheontentofthedatastruture.However,hismain 
onernisthedevelopmentofshape-polymorphifuntions andtheirtyping.Examplesofshapepolymorphifuntions arethegeneralizedmaporthegeneralizedsan,thatan 
beomputedwithouthangingthedatastrutureorgani­zation.Moregenerally,theshapeoftheresultofashape­polymorphifuntionappliationdependsonlyontheshape 
oftheargument,notofitsontent. Datafelds,studiede.g.byB.Lisper[15],areageneral­izationofthearraydatastruturewherethesetofindiesis 
extendedtoall(seealso[5].EÆientimplementationof Zn data­feldsraisethequestionofthedeterminationoftheir 
defnitiondomain[16];fewresultsexists,mainlybasedon toolsandresultsdevelopedinthepolyhedralmodelinthe 
feldofautomatiparallelization. Moregenerally,wehaveintroduedtheoneptofgroup basedfelds,orGBF[6,4],toextenddatafeldstowards 
moregeneralregulardatastrutures.AGBFfousesonthe groupofdisplaementbetweenthepositionofanorganiza­tion.Asforstandarddatafelds,thefuntionsonsidered 
arepartial,whihmakesabigdiferenewiththeworksand onernsdevelopedhere. Theexistingworksontheinfereneofthelengthofa 
vetor,andmoregenerallyoftheshapeofanarray,are rarewhenwehavedevelopedanalgorithmin1990forthe 8/2language(theonlyreferene,asfarweknow,is[19]). 
Sinethen,thesubjethasbeenmoreworkedout,seefor instane[12,20,11]. Thepioneeringworkof[18],introduestheideaofprodu­tivereursivedefnitions:thedefnitionoflistlisprodutive 
ifeahelementoflanbeomputedwithinafniteamount oftime.Forlists,andmoregenerallyfordatastruture,the notionofbeingprodutiveoinidewiththenotionofbeing 
maximal.Afuntionissaidprodutiveiftheimageofa produtiveelementisprodutive. Ournotionofprefx­omputabilityisfner:e.g.theexam­ple(4)isprodutivebutnotprefx­omputable.Thisisdue 
tothefousweputonthesub­strutureompliantordering oftheomputations.Thisenablesthegenerationofastati odetosolvethedefnitions.Wealsoprovideanexpliit 
. hek,throughtheinfereneof' p andthefuntionprog, thataprogramisprogressive.Notethattheprodutivityof infnitelistdefnitionissimilartotheproblemofdeteting 
deadlokindata­fowprograms,aproblemshandledin[21] and[13].Alltheseworksaremainlymotivatedbytheanal­ ysisofinfnitelistdefnitionandthentheresultsdeveloped 
donottakeintoaounttheboundedaspetoffnitedata strutures.  6. PERSPECTIVES Diretionsforfutureworksuggestthemselves.Itremains 
toinstantiatetheframeworkpresentedheretootherdata strutures(treeshavebeenskethed).Thereisalsoaneed toonsiderseveralordero.Forexample,thedefnition 
0l riota.(riota+ln):n maydefneavetorequaltoiotabutomputedinthereverse order(whenisadequatelydefnedandwitha"suÆx" 
0p sub­struturing). Someinterestingquestionareraisedbytheonnetion withtheonretedatastrutureintroduedinthestudyof 
sequentialityintheA­alulus[2].Theonnetionwouldbe investigated,howeverourgoalisnottodetermineastritly 
sequentialshedulingoftheomputation,buttoinferifa shedulingompatiblewiththe0orderingleadstothesame resultsastheunonstrainedomputationofthefxpoint. 
Onthetheoretialside,itwouldbeinterestingtoknowif prefx­omputabilityanbelinkedwiththeorderingindued onToby0throughthefuntionsj.Formally,0exhibits 
astrutureofabstratsimpliialomplex,whihopenthe waytoatopologialapproahofdatastrutures. 7. ACKNOWLEDGMENTS 
TheauthorwouldliketothanksOlivierMihelforassis­tane,inventiveargumentsandontinuoussupport.Heis alsogratefultoPaulFeautrierforstimulatingdisussions. 
ThisresearhhasbeensupportedbythefrenhGDRALP andARP.  8. REFERENCES <RefA>[1]F.Bergeron,G.Labelle,andP.Leroux.Combinatorial 
speiesandtree-likestrutures,volume67of Enylopediaofmathematisanditsappliations. CambridgeUniversityPress,1997.isbn0­521­57323­8. 
[2]P.­L.Curien.Categorialombinators,sequential algorithmsandfuntionalprogramming.Researh notesintheoretialomputersiene.Pitman,1986. 
Seond,revisededition,Birkhauser(1993). [3]J.­L.Giavitto.Typinggeometriesofhomogeneous olletion.In2ndInt.workshoponarray 
manipulation,(ATABLE),Montral,1992. [4]J.­L.Giavitto.Rapportsientifqueenvued'obtenir l'habilitationdirigerdesreherhes,May1998. 
http://www.lri.fr/=giavitto/Export/habilitation ­ anglais.ps.gz. [5]J.­L.Giavitto,D.DeVito,andJ.­P.Sansonnet.A 
dataparallelJavalient­serverarhiteturefordata . feldomputationsovern .InEuroPar'g8Parallel Proessing,LetureNotesinComputerSiene,Sept. 
1998. [6]J.­L.Giavitto,O.Mihel,andJ.­P.Sansonnet.Group basedfelds.InI.Takayasu,R.H.J.Halstead,and C.Queinne,editors,ParallelSymboliLanguagesand 
Systems(InternationalWorkshopPSLS'g5),volume 1068ofLetureNotesinComputerSiene,pages 209-215,Beaune(Frane),2­4Otober1995. 
Springer­Verlag. [7]J.­L.Giavitto,J.­P.Sansonnet,andO.Mihel.Infrer rapidementlagometriedesolletions.InWorkshop 
onStatiAnalysis,Bordeaux,1992. [8]C.A.GunterandD.S.Sott.HandbookofTheoretial ComputerSiene,volume2,hapterSemanti 
Domains,pages633-674.ElsevierSiene,1990. [9]P.Hudaketal.Reportontheprogramminglanguage HASKELLanon-strit,purelyfuntionallanguage, 
version1.3.YaleUniversity,CSDept.,May1996. [10]C.B.Jay.Asemantisofshape.SieneofComputer Programming,25(2-3):251-283,1995. 
[11]C.B.JayandM.Sekanina.Shapehekingofarray programs.TehnialReport96.09,Universityof Tehnology,Sydney,1996. 
[12]A.Kennedy.Dimensiontypes.InD.Sannella,editor, ProgrammingLanguagesandSystems-ESOP'g4,5th EuropeanSymposiumonProgramming,volume788of 
LetureNotesinComputerSiene,pages348-362, Edinburgh,U.K.,11-13Apr.1994.Springer. [13]E.A.LeeandD.G.Messershmitt.Synhronous 
datafow.Pro.oftheIEEE,75(9),Sept.1987. [14]X.Leroy.Theamllightsystem,release0.6 doumentationanduser'smanual.Tehnialreport, 
INRIA,Sept.1993. [15]B.Lisper.Ontherelationbetweenfuntionaland data­parallelprogramminglanguages.InPro.ofthe 
6th.Int.Conf.onFuntionalLanguagesand ComputerArhitetures.ACM,ACMPress,June 1993. [16]B.LisperandJ.­F.Collard.Extentanalysisofdata 
felds.TehnialReportTRITA­ITR94:03,Royal InstituteofTehnology,Sweden,January1994. [17]C.Okasaki.PurelyFuntionalDataStrutures. 
CambridgeUniversityPress,Cambridge,UK,1998. [18]B.A.Sijtsma.Ontheprodutivityofreursivelist defnitions.ACMTransationsonProgramming 
LanguagesandSystems,11(4):633-649,Otober1989. [19]S.Thatte.Atypesystemforimpliitsaling.Siene ofomputerprogramming,17:217-245,1991. 
[20]E.Violard.TypehekingofPEIexpressions.In C.Lengauer,M.Griebl,andS.Gorlath,editors, Euro-Par'g7ParallelProessing,ThirdInternational 
Euro-ParConferene,number1300inLNCS,pages 521-529,Passau,Germany,August1997. Springer­Verlag. [21]W.W.Wadge.Anextensionaltreatmentofdatafow 
deadlok.TheoretialComput.Si.,13(1):3-15,1981. </RefA>Untitled-1 1 In[223]:= ex2= Sys[ fib= (0_ (fib:9))+ ({0, 
1j_ (fib:8)), fibo = {0, 1j_ (((fibo:-9) :8)+ (fibo:8)) = 0 0 (fib:9)+ {0, 1}0 (fib: 8) Out[223]= {fib 
}fibo = {0, 1}0 ((fibo :8)+ ((fibo: -9):8)) In[224]:= Progression[ex2] Out[224]= {fib -1, fibo -1} In[225]:= 
CompileSys[ex2] XModule[ fib= Table[0, 10}l}, Do[fiblil= If[i 1, 0, XGet[fib, -1dilld If[i2, XGet[ 0, 
1},il, XGet[fib, -2d ill, i, 10}l; XPrint[solution of , Unevaluated[fibl, is: , fibl;XModule[ fibo= 
Table[0, 10}l}, Do[fibolil= If[i 2, XGet[ 0, 1},il, XGet[fibo, -2d ild XGet[fibo, -1d ill, i, 10}l; XPrint[solution 
of , Unevaluated[fibol, is: , fibol;XPrint[system solvedlll solution of fib is: 0, 1, 1, 2, 3, 5, 8, 
13, 21, 34} solution of fibo is: 0, 1, 1, 2, 3, 5, 8, 13, 21, 34} system solved  In[226]:= ex4= Sys[u 
= ({6, 7j_ (u:-8 :10] Out[226]= {u = {6, 7} 0 (u: -8) :10} In[227]:= Progression[ex4] Out[227]= {u -0} 
In[228]:= Evalue[ex4] Fct u-evalCut[evalJoin[ 6, 7} , evalCut[evalVar[u, ARGl, -8ll,10l Out[228]//TableForm= 
 u -{D, D, D, D, D, D, D, D, D, D} u -{6, 7, D, D, D, D, D, D, D, D} u -{6, 7, D, D, D, D, D, D, D, D} 
 In[229]:= ex7= Sys[ riota = «« riota:-4) -1) -4] ((riota -4) + (-1)) Out[229]= (riota = : 0 4 } In[230]:= 
Progression[ex7] Out[230]= {riota --1} In[231]:= Evalue[ex7] Fct riota-evalJoin[evalPlus[evalCut[evalVar[riota, 
ARG], -4], r-1}], r4}] Out[231]//TableForm= riota -{D, D, D, D, D} riota -{D, D, D, D,4} riota -{D, 
D, D,3, 4} riota -{D, D,2, 3,4} riota -{D,1, 2,3, 4} riota -{0, 1, 2, 3, 4} riota -{0, 1, 2, 3, 4}  
Figure7:ExampleofaMathematiasession.Thetehnispresentedinthispaperhavebeenextendedtohandlesystemsof equations.Forinstane,ex2isasystemthatdefnestwovetors:fibandfibo.AnexpressionA:­porrespondstoA+pin 
thispaperand{a,b}orrespondsto[Ia;bI].TheexpressionProgression[ex2]omputestheprogressionsofdefnitionsin 
systemex2(followingthespeifationgiveninfg.6).Theseprogressionsareallpositive,whihmeansthatthetwovetors 
areprefx­omputable.TheexpressionCompileSys[ex2]givesanimperativepseudo­odewhihomputesthesolution.The 
evaluationon­the­fyofthispseudo­odereturnstheexpetedsolution.Theprogressionofex4isnegativewhihmeansthat 
thisprogramannotbesolvedbyaleft­to­rightomputation.Arapidinspetionoftheequationshowsthatthedimension 
ofuis10.However,thefxedpointevaluationtriggeredbyEvalue[ex4]showsthatthisprogramisnottotallydefnedon 
{1,10}.Thesuessiveiterationsof' ex4areshoweduntilafxpointisreahed.A"."inthevetornotationmeansan undefnedelement..Programex7defnesthevetorriotamentionedinsetion6.Theomputedprogressionisnegative, 
whihmeansthatthesolutionannotbeomputedbyomputingtheelementsintheorderoftheinreasingindies.However, thefxedpointevaluationshowsthatriotaismaximalon{1,,5}. 
 
			
