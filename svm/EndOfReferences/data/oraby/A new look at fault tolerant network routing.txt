
 A NEW LOOK AT FAULT TOLERANT NETWORK ROUTING Danny Dolev Hebrew University, Givat Ram 91904 Jerusalem, 
Israel Joe Halpern Barbara Simons Ray Strong IBM Research Laboratory San Jose, California 95193 ABSTRACT: 
Consider a communication network G in which a limited number of link and/or node faults F might occur. 
A routing p for the network (a fixed path between each pair of nodes) must be chosen without any knowledge 
of which components might become faulty. Choosing a good routing corresponds to bounding the diameter 
of the surviving route graph R(G,p)/F, where two nonfaulty nodes are joined by an edge if there are no 
faults on the route between them. We prove a number of results concerning the diameter of surviv- ing 
route graphs. We show that if p is a minimal length rout- ing, then the diameter of R(G,p)/F can be on 
the order of the number of nodes of G, even if F consists of only a single node. However, if G is the 
n-dimensional cube, the diameter of R(G,p)/F<3 for any minimal length routing p and any set of faults 
F with IFl<n. We also show that if F consists only of edges and does not disconnect G, then the diameter 
of R(G,p)/F is < 31FI+I, while if F consists only of nodes and does not disconnect G, then the diameter 
of R(G,p)/F is <_ the sum of the degrees of the nodes in F, where in both cases p is an arbitrary minimal 
length routing. We conclude with one of the most important contributions of this paper: a list of interesting 
and apparently difficult open problems. 1. Introduction We consider the problem of obtaining efficient, 
reliable, fault tolerant routings in a network. As usual, a network is modeled as a graph, with nodes 
representing processors and edges representing communication links. A routing assigns to any pair of 
nodes in the network a fixed path between them. We assume that the network communication protocol has 
no information about the topology of the network, and thus all communication between nodes must go on 
this fixed routing. Permission tocopy without fee all or part of this material is granted provided that 
the copies are not made or distributed for direct commercial advantage, the ACM copyright notice and 
the title of the publication and its date appear, and notice is given that copying is by permission of 
the Association for Computing Machinery. To copy otherwise, or to republish, requires a fee and/or specific 
permission. In local area networks, the time required to send a mes-sage along a route is often dominated 
by the message process- ing time at either end; intermediate nodes on a fixed route relay messages without 
doing any extensive processing. Meta-phorically speaking, the intermediate nodes pass on the mes-sage 
without having to open its envelope. Thus, to a first approximation, the time required to send a message 
along a fixed route is independent of the length of the route. Consider the network shown in Figure 1. 
D Figure 1. Suppose we choose a minimal length routing on this network; i.e. one for which the route 
between any pair of nodes is a minimal length path between them. Where they exist, we break ties by always 
taking the route that goes through the edge CD. If in this example the edge CD becomes faulty, then many 
routes become unavailable. Figure 2 is the surviving route graph, where two nodes are joined by an edge 
exactly if the route between them is still up (i.e it did not go through the edge CD). G D Figure 2. 
&#38;#169; 1984 ACM 0-89791-133-4/84/004/0526 $00.75 526 Suppose processor C wants to broadcast a message 
to all processors. Since C can only send messages along the fixed routes, the message will not reach 
D, E, or F. If G rebroad- casts the message, it will reach E and F, but not D, since the route from G 
to D is also down. One more rebroadcast by E or F is necessary to ensure that D gets the message. Note 
that the worst case number of rebroadcasts needed to ensure that all processors get a message will be 
the diame- ter of the induced graph of Figure 2. In general, given a graph G, a routing p, and a set 
of faults F, we consider the surviving route graph R(G,p)/F with the same nodes as G-F, and an edge joining 
two nodes when- ever the route between them avoids F. As we noted above, the diameter of R(G,p)/F measures 
the number of rebroad- casts necessary to ensure that all processors get a message. This number determines 
the number of phases for which it is necessary to run certain distributed protocols (such as the Byzantine 
agreement protocols of [DS1. DS2]). Given the assumption that the time to send a message along a fixed 
route is independent of its length, the diameter of the surviv- ing route graph also gives a good estimate 
on the time re-quired to complete a broadcast in the presence of faults. Thus, our problem will be to 
choose a routing p on G that is fault tolerant because the diameter of R(G,p)/F remains small for any 
set of faults F of a given cardinality. This problem has given rise to many intcresting questions in 
graph theory, some of them still open. We first note that minimal length routings are not always optimal. 
Consider the spoke graph shown in figure 3. H A E D Figure 3. In this case, for any points on the circumference 
that are not joined by an edge, there exists a minimal length route that goes through the center node. 
But now suppose the center node becomes faulty. Then with this routing it is easy to see that the diameter 
of the surviving route graph grows to (n-1)/2 (where n is the total number of nodes). The problem with 
a minimal length routing in this case is that the center node is overworked. Consider instead the routing 
p on S n (the spoke graph with n nodes) in which the route between two nodes on the circumference is 
a minimal length path around the circumference (so that, for example, the route from A to D in figure 
3 would be ABCD, rather than AMD). In this case, the diameter of R(Sn,P)/F is easily seen to be _< 2 
if IFI _< 2. This leads us to ask if we can always find good routings. We show (Theorem 3) that for any 
(t+l)-connected graph G, we can efficiently find a routing p such that the diameter of R(G,p)/F is no 
greater than max(2t,4) if IFI _< t. Although minimal length routings are not always opti- mal, they are 
useful and easy to generate. A common routing algorithm (used for example in the Highly Available Systems 
project at IBM [AA]) produces random minimal length routings. Thus, it becomes important to find networks 
for which all minimal length routings are fault tolerant. As an example, consider Kn, the completely 
connected network on n nodes. If p is the unique minimal length rout- ing on Kn, then it is easy to check 
that the diameter of R(Kn,p)/F is 2 if IFI _< n-2. (Suppose F is fixed and that a and b are any two nonfaulty 
nodes in K n. Then either the link between a and b is nonfaulty, or, since IFI _< n-2, there must exist 
a nonfaulty node c such that both the link between a and c and the link between c and b are nonfaulty.) 
Unfortunately, because of high fan-in and fan-out, com-pletely connected networks are often impractical. 
As in several other contexts (eg. [Va]) networks laid out as an n-dimensional cube (Cn) achieve surprisingly 
good results. In Theorem I we show that for any minimal length routing p on C n and any set of faults 
F with [F[ < n-l, the diameter of R(Cn,P)/F_<3, independent of n. The proof of Theorem 1 is short but 
nontrivial. The result generalizes to n-dimensional rectangular grids and is easily seen to be optimal. 
We also show (Theorem 2) that there exists a minimal length routing hn on C n such that R(Cn,hn)/F < 
2 if IFI < n. This in fact is a corollary to a more general result of [BD] (although the proof for this 
special case is much simpler than that of [BD]). The spoke example shows that if we use minimal length 
routings, even a single node fault can force the diameter of the surviving route graph to grow to O(n). 
A closer look at this example suggests that the diameter can grow this way only if there are nodes of 
high degree. Indeed, we show (Theorem 4.) that if F consists only of node faults, G/F (i.e. O with all 
the elements of F removed) is connected, and p is a minimal length routing on G, then the diameter of 
R(G,p)/F is bounded above by I]FB, the sum of the degrees of the faulty nodes in F. The situation is 
quite different for edge faults. If F consists only of edge faults, we can show (Theorem 6) that if G/F 
is connected and p is any minimal length routing on G, then the diameter of R(G,p)/F is _< 31FI+ 1. We 
conjecture that both of these results can be some- what improved: to BF~-IFi+ I in the case of node faults, 
and to 2[Fl+l in the case of edge faults. We show in Theorems 5 and 7 that there exist graphs in which 
these conjectured bounds are attained. Chung and Garey [CG] were able to obtain analogous results to 
Theorems 4, 5, 6, and 7 for surviving graphs G/F (as opposed to surviving route graphs). Again the spoke 
example shows that one node fault can cause the diameter of the surviving graph to be O(n). However, 
Chung and Garey show that if F consists of only edge faults and G/F is con-nected, then the diameter 
of G/F is < (I +IFI)(1 + the diame- ter of G). In the case of node faults, they compute a bound on the 
diameter of G/F in terms of the degree of the faulty nodes. They also give an examples in both cases 
where their bounds are essentially achieved. The rest of the paper is organized as follows. In section 
2 the necessary definitions are given. Section 3 contains the results on the n-dimensional cube. In section 
4 good routings for general graphs are discussed. Section 5 gives general results for minimal length 
routings. There are still many open questions in this area; we list a few of them in Section 6. 2. Surviving 
Route Graphs Unless otherwise noted, we deal with an undirected graph G = (V,E) that corresponds to a 
communication net-work. A node routing p on V is a partial function p:VxV-V* such that p(x,y), if it 
is defined, is a sequence of nodes in V starting with x and ending with y; i.e., a word of the form xuy 
with ueV*. A node routing p on V is a routing on G=(V,E) if p(x,y) (when defined) corresponds to a simple 
path (one with no loops) in G from x to y: i.e., every consec- utive pair of nodes in p(x,y) is an edge 
in E. A routing p on V determines an edge-labelled, directed route graph R=(V,dom(p)), where two nodes 
x and y are joined by an "edge exactly if p(x,y) is defined. In this case the edge is labelled by p(x,y). 
If p is a routing on (3, we use the notation R(G,p) for the route graph determined by p. (We occasional- 
ly omit the G and p if they are clear from context.) A routing p is a partial routing if p(x,y) is undefined 
for some nodes xi~y; otherwise V is a total routing. Note that if p is a total routing then R(G,p) is 
a complete graph on the nodes of V. Let F be a set of nodes and edges called the set of faults. F can 
be partitioned into the set of node faults, FV, and the set of edge faults, F E. We define V/F to be 
V- FV, E/F to be E-FE-{(a,b) eElaeF v or bcFv}, and G/F = (V/F, E/F). G/F is called the surviving graph. 
An object (path, subgraph, etc.) avoids F if no element of F is contained in that object. Thus, a path 
avoids F if no node or edge on the path is in F. A routing avoids F if each of its routes does. An edge 
of a routed graph avoids F if the sequence (path) which is its label does. For a given set of faults 
F, let p/F be the subrouting of p consisting of those routes that avoid F; i.e. (#/F)(x,y)=p(x,y) if 
p(x,y) avoids F, otherwise (p/F)(x,y) is undefined. If R=(V,dom(p)) is a route graph and F is a set of 
faults, the surviving route graph is R/F = (V/F,dom(p/F)). Thus, two nodes are joined by an edge in the 
surviving route graph exactly if the route between them avoids F. We now briefly review some standard 
definitions from graph theory. We refer the reader to [Be] for more details. A graph G is connected if 
there exists a path in G between any pair of nodes in G; a graph G is (t÷i)-node connected if there are 
t+l node disjoint paths between any pair of nodes in G. Given nodes u and v in G, the distance between 
u and v in G, denoted dG(U,V), is the shortest path in G between u and v. The diameter of G, written 
DIAM(G), is the maximum of do(u,v) for every pair of nodes u, v in G. 3. The Diameter of the Surviving 
Route Cube Let Cnm(Vn,En) be the n-dimensional cube. We repre-sent nodes of C n as words of length n 
on the alphabet {0, I}. If x is a node, its i th coordinate is denoted x i. Edges exist only between 
nodes that differ on exactly one coordinate. Thus we represent edges as words of length'n on the alphabet 
10,1,*} with exactly one occurrence of * Networks in the form of n-dimensional cubes display surprisingly 
good performance. Theorem 1 states that the surviving route graph produced from any minimal length routing 
on C n and fewer than n faults has diameter at most 3. Theorem 2 defines a specific minimal length routing 
and 528 asserts that the diameter of the n-dimensional cube with this routing is 2. Theorem 1: Let p 
be a minimal length routing on C n. Then if IFl<n, DIAM(R(Cn,P)/F)_< 3. Theorem 2: Let Xn(X,y) be the 
(minimal length) routing on the n-dimensional cube that proceeds from x to y by moving along the coordinates 
on which they differ one at a time from left to right. Then if IFl<n, DIAM(R(Cn,Xn)/F)_<2. For example, 
h3(011,110)=(011,111,110) and h3(ll0,011)=(ll0,010,011). Note that hn(X,y)#hn(Y,X) in general. Wc first 
develop some machinery to prove these theo- rems. Define the weight of a node or an edge to be the sum 
of its coordinates where * carries the value 1/2. Let Ixldenote the weight of x. Thus 1111011=4 and ]1"1011=3.5. 
By drop- ping the iTM coordinate, any n-dimensional object can be projected along the iTM coordinate 
onto an (n-l)-dimensional object. Let Pi be the operator for projecting along the i th coordinate.. Note 
that an edge may project to a node, Thus P2(lll01)=ll01=P2(l*101). We write x<y when .< holds on each 
coordinate. We write x<y when x<y and < holds on some coordinate. We say x and y are maximally far apart 
when ~ holds on each coordinate. If x and y are nodes, let C(x,y) be the subgraph consisting of nodes 
and edges z satis- fying the condition, if XimY i then zi=y i. We call C(x,y) the subcube generated by 
x and y. Informafly it consists of the graph induced by all nodes between x and y. We define a pair of 
nodes x and y to be safe with respect to a set of faults F iff every minimal length path from x to y 
avoids F. A sequence of nodes x I ..... x k is safe with respect to F if each consecutive pair of nodes 
in the sequence is safe with respect to F. Lemma 1: C(x,y) avoids F iff x,y is safe with respect to F. 
Proof: A minimal length path from x to y must stay in C(x,y). [] By Lemma 1, if a sequence is safe with 
respect to F, then it will be a path in R(Cn,p)/F for every minimal length rout- ing p. Thus, Theorem 
1 follows immediately from Lemma 2 below. Lemma 2: If IFl<n, then for any pair of nodes x and y in Ce/F 
there are nodes u and v such that x,u,v,y is safe with respect to F. Proof: We proceed by induction on 
n, carrying along the extra induction hypothesis that if n> 1 and nodes x and y are maximally far apart, 
then nodes u and v, with x#u and u#v, can be chosen such that x,u,v,y is safe with respect to F, u is 
in C(x,v) and v is in C(u,y). Note that if x=0 n and y=l n, then the last condition is equivalent to 
x<u<v<y. The arguments for n=l and n=2 are straightforward and left to the reader. Assume the induction 
hypothesis for di- mension n-I with n>2. Let x and y be nodes in Cn/F. There are two cases. Case (a). 
The nodes x and y have the same value on some coordinate. Without loss of generality xl=Yl=l. If every 
element of F has a 1 in its first coordinate, then the sequence x, 0Pi(x), 0Pl(y), y is safe. Otherwise, 
the safe sequence can be constructed entirely in C(10n'l,l n) (the subgraph consisting of the nodes and 
edges with a l in the first coordinate) by the induction hypothesis, since at least one element of F 
is avoided by this subgraph. Case (b). The nodes x and y are maximally far apart. Without loss of generality 
x=0 n and y--I n. Case (b) has two subcases. Case (bl). There is an i and an element f of F such that 
Pi(f) is in {0n'l,ln'l]. Without loss of generalityi=l. Let F' = Pi(F)--|0n'I,In'I]. Then lF'kn-l. Thus, 
by the induction hypothesis there is a sequence 0n'l(u(v_<l n't that is safe with respect to F'. If v<l 
n't, then it is easy to check that 0n<0u<lv<l n is safe with respect to F. And if v=l n'l, then it is 
again easy to see that 0n<0u<lu<l n is safe with respect to F. Case (b2). For each i, Pi(F) does not 
include either 0 n-t or 1 n't. Let f be a minimal weight element of F. Without loss of generality assume 
fl=l so that Pl(f) has minimal weight in Pt(F). Let F' = Pl(F-|f}). If F' is empty, then (since the pro~'ction 
of a nonempty set is nonempty) F = {f]. Consequently, since fl=l, On<01n'1<l n is safe with: ~spect to 
F. Suppose that F' is not empty. Then IF'~<n-l, so by the induction hypothesis there exists at least 
one sequence safe with respect to F' of the form on'l<a<b_<tn't. Among all such sequences there must 
be one 0 n-I <u<v< I n-I with lul maximal. We claim that 0n<0u<Ov<t n is safe for F. It is clearly safe 
for F -|f}, so we must show only that it is safe 529 for f. Since fl = I, it suffices to show that f# 
C(0v, ln). But if f ¢ C(0v, ln),wemust havelPl(f)[ >_ Iv I. Since f was chosen with minimal weight and 
fl = 1, it follows that ]Pl(f')[ >_ IPl(f)] _> Iv I for all f' e F'. But then 0n'l<v<l n'l (< I n'l) 
is safe for F', contradicting the choice of u. (Recall we chose u with maximal weight.) [] Proof of Theorem 
2: We proceed by induction on n. The case n--I is trivial. For n>l there are two cases. Case (a). The 
nodes x and y agree on coordinate i. With-out loss of generality xi=Yi = 1. If every element of F has 
1 in the ith coordinate, then x, Xl...xi.10Yi+l...yn, y is a path in R(Cn,J~n)/F. Otherwise, let F' = 
Pi({feFlfi=l]). Since [F']<n-l, we can apply our induction hypothesis to Pi(Cn). Thus, there is a path 
of leng(h one or two from Pi(x) to Pi(Y) in R(Pi(Cn),Xn.i)/F'. If the path is of length one, then (x,y) 
is an edge in R(Cn,An)/F, since all faults not in F' have either 0 or * in the i th coordinate. And if 
Pi(x), u, Pi(Y) is a path of length two in R(Pi(Cn),J~n.i)/F', then it is easy to see that x, ut...ui, 
l lUi+l...u n, y is a path in R(Cn,Xn)/F. Case (b). The nodes x and y are maximally far apart. Without 
loss of generality, x=0 n and y=l n. The paths in C n formed by concatenating hn(0n,0il n'i) and hn(0iln'i,1 
n) for l<i<n are node disjoint so one of them must avoid F because [Fl<n. [] Remarks: I. We have shown 
that when IFl<n and p is a minimal length routing on C n, the diameter of R(Cn,p~/F is no greater than 
3. However it does not require IFi=n-1 to force the diameter to be 3. If we choose p so that p(0n,fx) 
always goes through 10 n't and p(0y,! n) always goes through 01 n'l, and choose F={10n't,0fn'l], it is 
easy to check that the diameter of R(Cn,P)/F is 3. A similar example can be obtained by plac- ing * in 
the first coordinates of eithcr or both elements of F. 2. We call a routing bidirectional if the route 
from x to y is the same as the route from y to x (i.e. p(x,y)=p(y,x)) for all x and y; otherwise, it 
is called unidirectional. We have al-lowed routings that are not bidirectional. Theorem 1 clearly still 
holds if we restrict to bidirectional routings, but there is no bidirectional analogue of Theorem 2. 
To see this, consider any minimal length bidirectional routing p on the square C 2. (There are not very 
many). Note that p(00,11) and p(01,10), the rou.tes to opposite corners of the square, must have an edge 
in common. If F consists of this single faulty edge, then the distance between its endpoints in R(C2,p)/F 
must be 3. For n>3, it is still an open question if there exists a bidirec-tional analogue of Theorem 
2. It would also be interesting to know whether there is a bidirectional analogue to Theorem 2 if F consists 
only of node faults. (Note that the counterex-ample given above for C 2 does not hold for node faults.) 
Again this remains an open question. 3. For any pair of nodes x,y in C n, we can find n midpoints z l 
..... z n with zt=y such that the n routes from x to y formed by concatenating Xn(X,Zi) and hn(Zi,y), 
i=l ..... n, are node disjoint. A proof of the existence of these midpoints may be obtained by carrying 
it along as an induction hypothesis in the proof of Theorem 2. These node disjoint routes can be useful 
in certain applications. For example, if processor x wants to guarantee that a message gets through to 
y quickly, it computes z I ..... z n and sends the message to z I ..... z n with instructions to forward 
it to y. One message must get through so long as [F[<n. 4. The techniques of proof of Theorems 1 and 
2 easily gcncr- alize to any n-dimensional rectangular grid (product of n intervals).  4. Routings in 
a General Network As we showed in the introduction, if S n is a spoke graph with n nodes and p is a minimal 
length routing on S n, then the diameter of R(Sn,p)/F can be O(n), even if F consists of a single node. 
However, there does exist a non-minimal length routing on the spoke for which the diameter of the surviving 
route graph is 2 as long as IF]<2. In this section we show that this result generalizes. Theorem 3: If 
G is t+l-node connected, then there is a bidi-rectional routing p such that if [F] < t, then DIAM(R(G,p)/F) 
_< max(2t,4). Proof: In order to prove the theorem, we will first need the following lemma. [,emma 3: 
Let G=(V,E) be t+l-node connected. Then there exists a set of nodes McV with [M[ = t+l such that the 
re-moval of the nodes in M and all of their adjacent edges parti- tions G into non-empty subgraphs, Gi, 
G 2 ..... G k, with k>_2. Moreover, if xcG i, i=l,2 ..... k, then there exists t+l node disjoint paths 
in G i from x to the nodes in M. If (x,m)¢E for some meM, we can take xm to be the path from x to m. 
530 Proof of Lemma 3: The fact that we can find M follows im- mediately from the fact that G is t+ 1-node 
connected. With-out loss of generality, let xcG 1 and choose some ycO 2. Then by the definition of connectivity, 
there exist t+l node dis-joint paths from x to y in G. Since M is a separating set of G, each of these 
paths must include exactly one node of M, with the path from x to each such node staying completely in 
G I. If (x,m) c E for some mcM and if the path from x tom in G 1 which is obtained by the above construction 
is not xm, then replacing that path with xm does not contradict the node disjoint requirement for the 
paths from x to M. [] Returning now to the proof of Theorem 3, given G, choose M.and node disjoint paths 
from each node x~M to each node mcM as in Lemma 3. We now define a partial routing p on G by the following 
two rules. I. If (u,v) c E, then p(u,v)=uv, i.e. the route from u to v is the edgc between them. 2. If 
x f~ M and m ¢ M, then p(x,m) is just the path chosen above. We note that standard techniques from network 
flow ([Ev]) can be used to obtain the routes in p in time o(Iwl 1/21El2). Rule 1 guarantees that if 
IFI _< t, then R(G,p)/F is con-nected and DIAM(R(G,p)/F) < DlAM(G/F). Note that although DIAM(G/F) could 
be O(n), Theorem 3 gives a bound on DIAM(R(G,p)/F) which is independent of n. If fcF is either a faulty 
node in G i (resp. M) or a faulty edge with both endpoints in G i (resp. M), then f is said to be in 
G i (resp. M). If fcF is a faulty edge which has one end point in M and the other in G i, then f is said 
to be in G i. Let F i be the set of faults in G i, i=l ..... k, and F M be the set of faults in M. Note 
IFtl + ... + IFkl + IFMI = t. We now complete the proof that DIAM(R(G,p)/F) < max(2t,4) by a case analysis. 
Case 1. For some i¢ { 1,2,...,k], [Fi[ = 0. Without loss of generality, assume that IFtl = 0. Since G 
1 is not empty, there exists a node zeG t such that z has a path in R/F to every node in M. Therefore, 
there exists a route of length 2 between any two non-faulty nodes of M via z. Any x g M must be adjacent 
in R/F to some non-faulty m ¢ M since IFI < M. This immediately gives a bound of 4 between any two nodes 
which are neither in M nor in G I. Case 2. No F i is empty. Let P = x0...x k be some minimum length path 
in R/F be- tween x = x 0 and y = x k. We bound the length of P by counting nodes in M which either appear 
on P or are adjacent to those internal nodes of P which are themselves not in M. Thus, for x i c-P, let 
(xi) = |nonfaulty nodes in M to which x i has anedgein R/F} u ({xi} n M). Let x i be a node of P which 
is not in M, and assume that xicG j. There is a path in R/F from x i to at least t+l-]Ffl non-faulty 
nodes of M. Since IFi[, IF2] > I and ]FI] + ... + ]Fk[ + IFml = t, we must have IFfl _< t-l, and so ](xi) 
I _> 2. Let Pi..j be the partial path xixi+l...x j. Let S(Pi..j ) = (xi) u ... u (xj). We prove the 2t 
bound by showing that [S(P0..i)I > I'i/2"l+l by induction on i. Since ](x0) ] _> 2, the claim holds 
for i = 0,1,2. Assume the claim holds up to i-I for i>2. The bound is obtained by the following counting 
argument. There are two cases, xi~M and xigM. If x i ¢ M, then x i ~t (xj) for j _< i-2, for otherwise 
P0..jxiP(i+l)..kisa shorter path from xtoy than is P. Thus, lS(Po..i)l Z IS(Po..i_2)l+l Z r(i-2)/21+2 
= ri/2l+l. If x i ~ M, then (xi) n (xj) : ~ for j<i-3. Otherwise, the existence of some m with m c (xi)n(xj) 
implies that P0..jmPi+l..k is shorter than P. Since for x i g M we have [(xl) ] > 2, then IS(Po..i)l 
_> Is(P0..i.3)[+2 _> r(i-3)/2]+3 > ri/21+l. Since P = xoxl...Xk, it follows that S(P) > ['k/2]+l. Since 
IMI _< t+l, we must have rk/21 _< t. Consequently, k _< 2t and IP[ _< 2t. [] 5. Missing Nodes and Missing 
Links in this section we return to minimal length routings and obtain bounds for the diameter of a surviving 
route graph in terms of the number of faulty edges and the degrees of the faulty nodes. Definition: For 
a node a, define fat to be the degree of a; i.e., the number of edges with endpoint a. For an edge e, 
define ~e|=2. Finally, define |F|:Xf~Flf[. We first consider the case where F consists only of nodes. 
531 Theorem 4: If F consists only of nodes, G/F is connected, and p is any minimal length routing of 
G, then DIAM(R(G,p)/F) < IFU. Proof: First note that if the result holds for IFI= l, then it can be extended 
to all sets of node faults by the following argu- ment. Given a graph G=(V,E), a set of node faults F 
such that G/F is connected, and a minimal length routing p, con- struct a graph G' in which all the faulty 
nodes are combined into one node. More precisely, let G'=(V',I~'), where V'=(V-F)uIxl, where x is a distinguished 
node, and E'=E/Fu[(a,x) IacV/F and for some fcF, (a,f)~E}. Note that since the neighbors of x in G' are 
exactly the non-faulty neighbors in G of the nodes in F, we have Ux H < ~t(FUf~. Let p' be any minimal 
length routing on G' such that if there is a minimal length path from v to w which goes through x, then 
p'(v,w) goes through x. It is now easy to check that if p(v,w) goes through a node in F, then p'(v,w) 
goes through x. Let F'={x]. By the observation above, it follows that R(G',p')/F' is a subgraph of R(G,p)/F: 
it has the same nodes, but possibly fewer edges. Thus DIAM(R(G,p)/F)<D1AM(R(G',p')/F'). But by hypothesis, 
DIAM(R(G',p')/F')_<~x], giving the desired result. We now prove the result for IFl=l. So suppose that 
F consists of only one faulty node f. Let N(f)=lwlthere exists an edge from f to w in G| (these are the 
neighbors of f in G). Note that by definition IN(f)I=0f0=HF~. Fix a minimal length route p, and let H=R(G,p)/F. 
We want to show DIAM(H)_<lf]. Suppose we have proved the claim for k'<k. We now prove it for k>2. We 
first need to show: Claim 2: If li-jl>2, then Near(Li) and Near(Lj) are disjoint. To prove Claim 2, suppose 
otherwise. Then there exists beN(f) such that beNear(u) and bcNear(v) for some ucL i and some veLj. We 
will now show that no minimal length path in G from u to v can contain the node f. This then shows that 
u and v must have an edge between them in H. Consequently li-jl<l, which contradicts the assumption that 
li-jl> 2. So suppose by way of contradiction that some minimal length path in G from u to v contains 
I. Thus the path is of the form ~r=u...wfw'...v, where w,w'cN(f). Since beNear(u), we must have dG(u,b)<dG(U,W 
). Similarly, since bcNear(v), we must have dG(b,v)<dG(b,w' ). One way of getting from u to v in G is 
to go from u to b and then from b to w. By the observations above, this gives a shorter path than ~r, 
contra- dicting the minimality of ~r and proving Claim 2. Returning to the proof of Claim I, suppose 
by way of contradiction that Claim 1 does not hold and consider the minimum k>2 for which it does not 
hold. Note that INear(Lk.|)l=l, for it iNear(Lk.l)l>2 , Claim 2 and the fact that the result holds for 
k-2 implies that Claim I also holds for k. Moreover, Near(Lk_l) cannot be disjoint from Near(Lk.2), for 
then from the fact that Claim I holds for k-1 we could again immediately prove it for k. So assume with- 
out loss of generality that Near(Lk.1)={c}, and that Since p is a minimal length routing, if two nodes 
u and v are neighbors in G, then p(u,v) is just the edge between them. It follows that G/F is a subgraph 
of H, and so H is connect- ed. Choose any two nodes a and b in G/F such that dH(a,b)=DIAM(H). Let Li, 
i=0 ..... DIAM(H), consist of Ic I dH(a,c)=i]. For any node ceG/F, let Near(c)={weN(f)lfor all w'eN(f), 
dG(c,w)<dG(C,W')]. Thus Near(c) consists of the nodes in N(f) that are closest (in G) to c. Finally, 
let Near(Li)=Uc(L,Near(c ). Note that since Li# @ for i=0,1 ..... DIAM(H), it follows that Near(Li)#,¢,. 
We will show." Claim I: lUi<kNear(Li)l>k. From the claim it follows that Irl=lN(f)l>_lUi<DiAM(H)Near(Li)l_> 
DIAM(H), which establishes the result for IFI= t. To prove the claim, we proceed by induction. The claim 
is trivial if k=0 or k=l. c c Near (Lk.2). Choose ueLk. 1 and vcL k such that u and v are neighbors in 
G.. (There must be such u and v. Choose any path in G/F fromatob. Let vbe the first node in L k on that 
path, and u be the node just before v. We leave it to the reader to check that there exist such u and 
v and that they have the desired property.) Let dcNear(v). We must have e#d, otherwise we would have 
ceNear(Lk.2)nNear(Lk) , contradicting Claim 2. We now show that deNear(u), contradicting the hypothesis 
that Near(Lk.1)={c}. Choose tCLk. 2 such that ccNear(t). (Such a t exists since ccNear(Lk.2) by hypothesis.) 
There must be some minimal length path in G from t to v that goes through f (otherwise v would be in 
Lj for some j<k-1). Sup-pose this path is of the form t...wfw'...v, where w,w'cN(f). Another way of getting 
from t to v is to take a minimal length path from t to e, followed by a minimal length path from e to 
u, followed by the edge from u to v. Thus we must have do(t,w)+2+do(w',v ) < do(t,c)+do(c,u)+l. Since 
532 ccNear(t) and dcNear(v), we must have dG(t,c) _< do(t,w ) and dG(d,v) _< dG(W',V). Hence dG(t.c)+2+dG(d,v) 
< dG(t,c)+dG(c,u)+l, which implies dG(d,v)+l < dG(c,u). One way to get from d to u is to go from d to 
v and then to take the edge from v to u. Hence dG(d,u) < dG(d,v)+l. Combining these inequalities, we 
get dG(d,u)<dG(e,u). But since ecNear(u), it follows that we must also have deNear(u), and thus deNear(Lk.l), 
contradicting the as- sumption that Near(Lk.l)={c]. O The previous theorem is close to optimal, as we 
now show. Theorem 5.: For all d l ..... d k, there exists a graph G, a mini- mal length routing p on 
G, and a set of node faults F={Ii ..... fk] which does not disconnect G such that the degree of fi is 
d i, i= 1 ..... k, and DIAM(R(G,o)/F)=~F~-[F[+ 1. Proof: The graph G is a simple generalization of the 
spoke example of the introduction. We give G below in Figure 4 in the case that k=3 and dl=d2=3 and d3=4. 
We choose the minimal length routing that takes a path through fl, f2, or f3 whenever possible: fl Figure 
4. We believe that the upper bound of Theorem 4 can be improved to the lower bound shown in Theorem 5. 
We for- malize this as: Conjecture 1: For any graph G, any minimal length routing p, and any set of node 
faults F which does not disconnect G, DIAM(R(G,p)/F)_<~FII-IFI+ 1. The situation for edge faults is somewhat 
different. Theorem 6: If F consists only of edges, G/F is connected, and p is any minimal length routing 
of G. then DIAM(R(G,p)/F) _< 3[Fl+ 1. We use the following lemmas to prove Theorem 6. Re-call that the 
pair of nodes u, v is safe with respect to F if all the minimum length paths from u to v avoid F. Lemma 
4: Assume F has only edges. If the pair of nodes x,y is not safe with respect to F, then there is an 
edge (u,v) in F and a minimal length path from x to y containing (u,v) such that v,y is safe with respect 
to F. The proof of Lemma 4 is a straightforward induction on the distance between x and y in G. Proof 
of Theorem 6: Let x and y be a pair of nodes of G and let X0Xl...x k bca minimal length path from x=x 
0 to y=x k in H=R(G,p)/F (such a path must exist by the same arguments as in Theorem 4 above: since p 
is a minimal length routing, it follows that G/F is a subgraph of H so H is connected). Note that by 
construction dH(Xi,Xj) = [i-j]. For each x i with i>_2, we select an endpoint v of an edge in F such 
that v,x i is safe with respect to F and v lies on a minimal length path in G from x to x i (Lemma 4). 
We say that v is associated with x i. Intuitively, v is the endpoint of a faulty edge closest to x i 
on a path from x. Note that if (u,v)¢F and v is associated with some x i. then dG(X,U) < dG(X,V), and 
so u cannot be associated with any x i. Thus, at most one node of each faulty edge can be associated 
with some x i. Moreover, a particular node v can be associated with at most three xi's. For if v were 
associated with x i and xj, and li-j]>2, then since dH(Xi,V ) = dH(Xj,V ) = 1, we have dH(Xi,Xj) < 2, 
a contradiction. Now, by a simple counting argument, we get that k _< 3[F]+ 1. [] Again we have a lower 
bound that almost matches the upper bound of Theorem 6. Theorem 7: For each t there is a graph Gt, a 
minimal length routing Pt of G t, and a set F t of t edges that does not discon- nect G t such that DIAM(R(Gt,Pt)/Ft) 
= nFtD+l (= 2t+l). Proof: The required graph G t is obtained by the obvious generalization from the graph 
G 4 shown in figure 5, where the edges marked with an x through them are in F, and p goes through a faulty 
edge whenever possible (for example, p(A,G)=ABG). A B C D E  i"i !'i ,! F G H I J Figure 5. Conjecture 
2: For any graph G, any minimal length routing p on G, and any set of edge faults F which does not discon-nect 
G, D1AM(R(G,p)/F)<nFD+ I(=21F[+ 1). Combining the graphs of Theorems 5 and 7 leads us to the following: 
Corollary: For all k, m, dl, ..., dm, we can find a graph G, a minimal length routing p on G and set 
of k edge faults and m node faults F with degrees d l ..... d m such that G/F is connect- ed and DIAM(R(G,p)/F)=aFfl-[Fv]+ 
1. Of course, we also have: Conjecture 3: For any graph G, minimal length routing p, and set of faults 
F which does not disconnect G, DIAM(R(G,p)/F) =~Fa-lFvl+ I. Conjectures 1, 2, and 3 seem to be quite 
difficult to prove. L. Stockmeyer has recently shown that Conjecture 1 implies Conjecture 2. We (and 
independently F. Chung) have also shown that the bound of Theorem 6 can be improved to 2.5[F[+ 1. We 
can show that Ihe bound of 2[F[+ 1 of Conjec- ture 2 holds for IFI= 1,2,3. The proof for IFI= I is of 
independ- ent interest, and we present it below. Our proofs for Iv[=2 and 11::1=3 grow exponentially 
more difficult, and do not seem to lead to any generally applicable technique. Theorem 8: If p is a minimal 
length routing on G, and F consists of one edge which does not disconnect G, then D1AM(R(G,p)/F)_< 3. 
Proof: Let H:R(G,p)/F. Choose a,beG/F such that dlt(a,b)# 1. Since G/F is connected, there must be some 
path al...a k froma=a I tob=a kinG/F. Let ajbe the last point on this path such that dn(a,aj)=l. Note 
j>2, since the edge between a=a 1 and a 2 in G is nonfaulty by hypothesis. Since the edge in G between 
a i and aj+ l is also nonfaulty by hy- pothesis, dH(aj,aj+t)=l. We now show dll(aj+l,b)=l, which will 
complete our argument (since dH(a,b) < dlt(a,aj)+dH(aj,aj+l)+dH(ai+l,b) = 3). Let the faulty edge in 
F be (x,y). Since dll(a,b)#l, p(a,b) must be of the form a...xy...b. Because p is a minimal length routing, 
we must have dG(a,x)<dG(a,y), and dG(b,x)>dG(b,y). By choice of aj, dn(a,ai+l)# 1, so the edge (x,y) 
must also be on p(a,aj+l). But since dG(a,x)_<dG(a,y ), p(a,aj+ t) must be of the form a...xy...aj+ I. 
Thus dG(aj+l,y)_<dH(aj+l,x). The above ine-qualit!es tell us that y is closer to both aj+ l and b than 
x is, so no minimal length path from aj+ l to b could have the edge (x,y) on it. Thus p(aj+l,b) is fault-free, 
and dH(aj+l,b)=l as desired. I:] The last issue we consider in this section is connectivity. The examples 
of Theorems 5 and 7 of graphs with a given diameter were graphs of low connectivity. However, as the 
following theorem shows, once we have an example of a graph where a certain number of edge faults and 
vertex faults cause the resulting surviving route graph to have a given diameter, we can construct a 
graph with arbitrarily high connectivity with the same property. Theorem 9: Given a minimal length routing 
# on a graph G, a set F of faults that does not disconnect G, and any desired node connectivity k, there 
is a graph G*=(V*,E*) containing G as a suhgraph and a minimal length routing p* on G* con- taining p 
as a subrouting such that G* is at least k connected and DIAM(R(G*,p*)/F) is at least as large as DIAM(R(G,p)/F). 
Proof: Left to full paper. [] 6. Open Problems Although we have obtained a number of results, many open 
problems remain in this area. We list a few of them here. 1. We have obtained much better bounds than 
the general bounds for completely connected graphs and for the n-dimensional cube. Are there other classes 
of networks with equally good bounds7 2. Prove Conjectures 1, 2, and 3. 3. Can the upper bound of Theorcm 
3 be improved? In case t<2 we can show that any graph G has a routing # with DIAM(R(G,p)/F)<3. For case 
t=l, the square shows that this result is best possible for bidirectional routing. We con- jecture that 
the results for the n-dimensional cube generalize: that is, for any graph G there is a bidirectional 
routing p with DIAM(R(G,p)/F)_<3 and a unidirectional routing p' such that DIAM(R(G,p')/F)_< 2. 4. The 
proofs of Theorems 4 and 6 do not use the connectivi- ty of G but only the fact that G/F is connected. 
However, the connectivity of G is heavily used in Theorem 3. What happens when this assumption is relaxed? 
 534 5. A routing p is consistent (prefix consistent, suffix consistent) if every subpath (respectively, 
prefix, suffix) of a route is also a route. The routings h n of Theorem 2 are consistent, but the routing 
constructed in the proof of Theorem 3 is not necessarily even suffix consistent. What are the corresponding 
bounds for consistent, prefix consistent, and suffix consistent routings? 6. What happens to the diameter 
of the surviving route graph if the routing is a random routing? 7. What, if anything, can one say about 
routings that are almost minimal length? 8. We have assumed that the graphs representing communi- cation 
networks have undirected edges. We can also consider what happens if we have directed communication networks. 
This corresponds to having one-way communication links. What are the analogues of our results for directed 
graphs? We remark that we can construct an example of a directed graph G and a minimal length routing 
p on G such that the diameter of R(G,0)/F is O(n) even if F consists of only one faulty edge, so that 
Theorem 6 does not hold if G is a directed  graph. (Tile example has much the same flavor of the spoke 
example given in the introduction.) Define ae| for a directed edge e with source node a to be ~a| and 
define ac[=2 for an undirected edge e. As before, ~F~=~fcF]f]. We conjecture that if p is a minimal length 
rout- ing and G/F is connected, then DIAM(R(G,p)/F) < IFblFvl+1. Note that this is a generalization of 
Conjecture 3. In practice graphs where every node has degree < 3 frequently arise. If these conjectures 
are true, then if G is such a graph and p is a minimal length routing, then DIAM(R(G,p)/F) < 21FI+I for 
any collection F of node and edge faults that do not disconnect G.  Acknowledgements We would like to 
thank Fan Chung, Larry Stockmeyer, and Dexter Kozen for many interesting discussions on the subject of 
proving diameter bounds. Fan was instrumental in pointing out many of the ideas that led to the proof 
of Theo- rem 4, References <RefA>[AA] H. Aghili, M. Astrahan, S. Finkelstein, W. Kim, J. McPherson, M. Schkolnick, 
R. Strong, "A Prototype for a Highly Available Database System," 1BM Re-search Report RJ3755, January, 
1983. [Be] C. Berge, Graphs and H3~oergraphs , North Holland, New York, 1976 [BD] A. Broder, D. Dolev, 
M. Fischer, B. Simons, Effi- cient fault tolerant routings in networks, unpublished manuscript, 1983. 
[CG] F. R. K. Chung and M. R. Garey, "Diameter Bounds for Altered Graphs," unpublished manu-script, 1983. 
[DS1 ] D. Dolev and R. Strong, "Authenticated Algorithms for Byzantine Agreement," to appear in SIAM 
J. Comput, see also IBM Research Report RJ3416, March, 1982. [DS2] D. Dolev and R. Strong, "Byzantine 
Agreement," IBM Research Report RJ3714, December, 1982. [Ev] S. Even, Graph Algorithms, Computer Science 
Press, Potomac, Maryland, 1979. [Va] L. G. Valiant, "A Scheme for Fast Parallel Commu-nications," SlAM 
J. Comput., 11, May 1982, pp. 350-361.</RefA>  
			
